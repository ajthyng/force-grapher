(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(e,t,n){e.exports=n(123)},122:function(e,t,n){},123:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(51),o=n(157),i=n(8),u=n(9),s=n(56),d=n(2),l=n.n(d),f=n(6),p=n(13),m=n(11);function b(){var e=Object(i.a)(["\n  width: 60px;\n  min-width: 60px;\n  margin: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]);return b=function(){return e},e}function h(){var e=Object(i.a)(["\n  width: 45px;\n  min-width: 45px;\n  border-top: "," "," 4px;\n"]);return h=function(){return e},e}function x(){var e=Object(i.a)(["\n  margin-top: 12px;\n  margin-bottom: 24px;\n"]);return x=function(){return e},e}function v(){var e=Object(i.a)(["\n  width: 45px;\n  height: 45px;\n  border-radius: 25px;\n  background-color: white;\n  box-shadow: 2px 2px 4px #808080;\n"]);return v=function(){return e},e}function g(){var e=Object(i.a)(["\n  min-width: 60px;\n  width: 60px;\n  margin: 8px;\n"]);return g=function(){return e},e}function y(){var e=Object(i.a)(["\n  color: #363534;\n  font-size: 18px;\n"]);return y=function(){return e},e}function k(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n"]);return k=function(){return e},e}function w(){var e=Object(i.a)([""]);return w=function(){return e},e}function O(){var e=Object(i.a)([""]);return O=function(){return e},e}function j(){var e=Object(i.a)([""]);return j=function(){return e},e}function E(){var e=Object(i.a)(["\n  color: white;\n  font-size: 60px;\n  text-shadow: 2px 2px 4px #808080;\n  margin: 8px;\n  min-width: 60px;\n"]);return E=function(){return e},e}function C(){var e=Object(i.a)(["\n  transform: scale(0.3) translate3d(-392px, 450px, 0);\n  position: absolute;\n  bottom: 12px;\n  left: 12px;\n  width: 300px;\n  border: solid 2px #808080;\n  border-radius: 3px;\n  background-color: #e8e3db;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  display: flex;\n  padding: 12px;\n\n  @media only screen and (max-width: 767px) {\n    display: none;\n  }\n\n  transition: transform 300ms ease-in-out;\n\n  &:hover {\n    transform: scale(1) translate3d(0, 0, 0);\n  }\n"]);return C=function(){return e},e}var N=u.b.div(C()),D=u.b.i(E()),S=Object(u.b)(D).attrs(function(e){return{className:"ion-md-star"}})(j()),F=Object(u.b)(D).attrs(function(e){return{className:"ion-md-square"}})(O()),_=Object(u.b)(D).attrs(function(e){return{className:"ion-md-cloud"}})(w()),A=u.b.div(k()),I=u.b.span(y()),P=u.b.div(g()),R=u.b.div(v()),T=function(e){var t=e.icon;return a.a.createElement(A,null,a.a.createElement(t,null),a.a.createElement(I,null,e.label))},z=function(e){return a.a.createElement(A,null,a.a.createElement(P,null,a.a.createElement(R,null)),a.a.createElement(I,null,e.label))},L=Object(u.b)(A)(x()),M=u.b.div(h(),function(e){return e.dashed?"dashed":"solid"},function(e){return e.color}),B=u.b.div(b()),Y=function(e){var t=e.color,n=e.label,r=e.dashed;return a.a.createElement(L,null,a.a.createElement(B,null,a.a.createElement(M,{color:t,dashed:r})),a.a.createElement(I,null,n))},G=function(e){return a.a.createElement(N,null,a.a.createElement(z,{icon:S,label:"On Campus System"}),a.a.createElement(T,{icon:F,label:"External System"}),a.a.createElement(T,{icon:_,label:"Cloud System"}),a.a.createElement(Y,{color:"#005481",dashed:!0,label:"Custom Interface"}),a.a.createElement(Y,{color:"#9e6614",label:"Built-in Interface"}))},K={},U={subscribe:function(e,t){K[e]||(K[e]=[]),K[e].push(t)},unsubscribe:function(e,t){K[e]&&(K[e]=K[e].filter(function(e){return e!==t}))},next:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];K[e]&&K[e].forEach(function(e){"function"===typeof e&&e.apply(void 0,n)})}};Object.freeze(U);var X=n(4),q=n.n(X),H=n(84),J=n.n(H),W=n(31),Q=n.n(W),V=n(32),Z=n.n(V),$=function(){var e=function(e,t){var n=localStorage.getItem(e)||t;try{return JSON.parse(n)}catch(r){return n}},t=function(e,t){return localStorage.setItem(e,JSON.stringify(t))},n=function(e){var t=Object(m.a)({},e),n=Object.keys(t),r=!1;return n.forEach(function(e){var n=t[e],a=e;n.forEach(function(n){if(n&&n.node!==e){var c=t[n.node],o=c&&c.findIndex(function(e){return e&&e.node===a});o>=0&&(c.splice(o,1),r||(r=!0))}}),t.length<=0&&delete n[e]}),{edges:t,didFix:r}},r=function(){var e=Object(f.a)(l.a.mark(function e(t){var n,r,a,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.node,r=t.x,a=t.y,e.next=3,i();case 3:return(c=e.sent)[n]&&(c[n].position={x:r,y:a}),e.abrupt("return",b(c));case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=Object(f.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:return n=e.sent,Object.entries(t).forEach(function(e){var t=Object(p.a)(e,2),r=t[0],a=t[1],c=a.x,o=a.y;n[r]&&(n[r].position={x:c,y:o})}),e.abrupt("return",b(n));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),c=function(){var t=Object(f.a)(l.a.mark(function t(){var r,a,c,o,i,u;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C();case 2:if((r=t.sent)._edges){t.next=13;break}return t.next=6,e("_edges",{});case 6:if(!(a=t.sent)){t.next=13;break}return r._edges=a,t.next=11,s(r);case 11:return t.next=13,localStorage.removeItem("_edges");case 13:if(c=q()(r,"_edges",{}),o=n(c),i=o.didFix,u=o.edges,!i){t.next=19;break}return t.next=19,d(u);case 19:return t.abrupt("return",c);case 20:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),o=function(){var e=Object(f.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:return t=e.sent,e.abrupt("return",Object.values(t));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),i=function(){var t=Object(f.a)(l.a.mark(function t(){var n,r;return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C();case 2:if((n=t.sent)._nodes){t.next=13;break}return t.next=6,e("_nodes",{});case 6:if(!(r=t.sent)){t.next=13;break}return n._nodes=r,t.next=11,s(n);case 11:return t.next=13,localStorage.removeItem("_nodes");case 13:return t.abrupt("return",q()(n,"_nodes",{}));case 14:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),u=function(){var t=Object(f.a)(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e("_diagrams",{}));case 1:case"end":return t.stop()}},t)}));return function(){return t.apply(this,arguments)}}(),s=function(){var e=Object(f.a)(l.a.mark(function e(n){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n._id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,u();case 4:return(r=e.sent)[n._id]=n,e.abrupt("return",t("_diagrams",r));case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(f.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return(n=e.sent)._edges=t,e.abrupt("return",s(n));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=Object(f.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return(n=e.sent)._nodes=t,e.abrupt("return",s(n));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(f.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=2;break}throw new Error("Nodes must have IDs to be added");case 2:return e.next=4,i();case 4:return(n=e.sent)[t.id]=t,e.next=8,w(t);case 8:return e.next=10,b(n);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(f.a)(l.a.mark(function e(t,n,r){var a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id&&n.id){e.next=2;break}throw new Error("Nodes must have IDs to add edges");case 2:return e.next=4,c();case 4:return a=e.sent,Array.isArray(a[t.id])||(a[t.id]=[]),e.next=8,v(t,n,r);case 8:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),v=function(){var e=Object(f.a)(l.a.mark(function e(t,n,r){var a,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id&&n.id){e.next=2;break}throw new Error("Nodes must have IDs to add directed edges");case 2:return e.next=4,c();case 4:return a=e.sent,Array.isArray(a[t.id])||(a[t.id]=[]),(o=a[t.id].findIndex(function(e){return e&&e.node===n.id}))>=0?a[t.id][o]={node:n.id,data:r}:a[t.id].push({node:n.id,data:r}),e.next=10,d(Object(m.a)({},a));case 10:case"end":return e.stop()}},e)}));return function(t,n,r){return e.apply(this,arguments)}}(),g=function(){var e=Object(f.a)(l.a.mark(function e(t,n){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id&&n.id){e.next=2;break}throw new Error("Nodes must have IDs to remove directed eges");case 2:return e.next=4,c();case 4:return(r=e.sent)[t.id]=r[t.id]&&r[t.id].filter(function(e){return e&&e.node!==n.id}),e.next=8,d(r);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=Object(f.a)(l.a.mark(function e(t,n){var r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id&&n.id){e.next=2;break}throw new Error("Nodes must have IDs to remove edges");case 2:return e.next=4,c();case 4:return(r=e.sent)[t.id]=r[t.id]&&r[t.id].filter(function(e){return e&&e.node!==n.id}),e.next=8,d(r);case 8:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(f.a)(l.a.mark(function e(t){var n,r,a,o,u,s,f,p,b,h;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,r=t.data,a=t.connections,o=null,!n){e.next=10;break}return e.next=5,i();case 5:u=e.sent,s=q()(u,"[".concat(n,"].position"),{x:void 0,y:void 0}),o={id:n,edges:[],previousEdges:u[n].edges.map(function(e){return Object(m.a)({},e)}),position:s,data:Object(m.a)({},u[n].data,r)},e.next=11;break;case 10:o={id:Q()(),edges:[],data:Object(m.a)({},r||{})};case 11:if(f=Object.keys(a||{}),p=q()(o,"previousEdges",[]),!(f.length<=0&&p.length>0)){e.next=24;break}return e.next=16,c();case 16:return delete(b=e.sent)[o.id],h=[],Object.keys(b).forEach(function(e){b[e].forEach(function(t,n){t&&t.node===o.id&&h.push({key:e,index:n})})}),h.forEach(function(e){b[e.key].splice(e.index,1)}),e.next=23,d(Object(m.a)({},b));case 23:return e.abrupt("return",o);case 24:return f.forEach(function(e){var t=q()(a,"".concat([e],".connectedTo"),null);if(!t)throw new Error("You cannot make a connection without a target");var n=q()(a,"".concat([e],".connectionType"),null);if(!n)throw new Error("You cannot make a connection without a type");var r=q()(a,"".concat([e],".read"),null),c=q()(a,"".concat([e],".write"),null);if(!r&&!c)throw new Error("You must specify a read or a write option");var i=q()(a,"[".concat(e,"].data"),{}),u=o.edges.findIndex(function(t){return t.id===e});u>=0?o.edges[u]={id:t.key,data:Object(m.a)({},i,{read:r,write:c,type:{id:n.key,label:n.text}})}:o.edges.push({id:t.key,data:Object(m.a)({},i,{read:r,write:c,type:{id:n.key,label:n.text}})})}),e.abrupt("return",o);case 26:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(f.a)(l.a.mark(function e(t){var n,r,a,c,o,i,u,s,d,f;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=q()(t,"edges",[]),r=q()(t,"previousEdges",[]),!(n.length<=0)){e.next=4;break}return e.abrupt("return");case 4:a=l.a.mark(function e(a){var c,o,i,u,s,d,f;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n[a],o=q()(c,"data.read"),i=q()(c,"data.write"),u={id:q()(t,"id")},s={id:q()(c,"id")},d=r.find(function(e){return e&&e.id===c.id}),!(f={read:q()(d,"data.read",o),write:q()(d,"data.write",i)}).read||o){e.next=10;break}return e.next=10,g(s,u);case 10:if(!f.write||i){e.next=13;break}return e.next=13,g(u,s);case 13:if(!o||!i){e.next=18;break}return e.next=16,x(u,s,q()(c,"data"));case 16:e.next=26;break;case 18:if(!o){e.next=23;break}return e.next=21,v(s,u,q()(c,"data"));case 21:e.next=26;break;case 23:if(!i){e.next=26;break}return e.next=26,v(u,s,q()(c,"data"));case 26:case"end":return e.stop()}},e)}),c=0;case 6:if(!(c<n.length)){e.next=11;break}return e.delegateYield(a(c),"t0",8);case 8:c++,e.next=6;break;case 11:if(!((o=J()(r,t.edges,"id")).length>=0)){e.next=36;break}c=0;case 14:if(!(c<o.length)){e.next=36;break}if(i=o[c],u=q()(i,"data.read"),s=q()(i,"data.write"),d={id:q()(t,"id")},f={id:q()(i,"id")},!u||!s){e.next=25;break}return e.next=23,y(d,f);case 23:e.next=33;break;case 25:if(!u){e.next=30;break}return e.next=28,g(f,d);case 28:e.next=33;break;case 30:if(!s){e.next=33;break}return e.next=33,g(d,f);case 33:c++,e.next=14;break;case 36:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=Object(f.a)(l.a.mark(function e(n){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t("_currentDiagram",n));case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(f.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return(n=e.sent)._name=t,e.abrupt("return",s(n));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(f.a)(l.a.mark(function e(t){var n,r,a,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.edges,r=t.nodes,a=t.id,c=t.name,!a){e.next=4;break}return e.next=4,O(a);case 4:if(!c){e.next=7;break}return e.next=7,j(c);case 7:return e.next=9,b(r);case 9:return e.next=11,d(n);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),C=function(){var n=Object(f.a)(l.a.mark(function n(){var r,a,c,o;return l.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,u();case 2:return r=n.sent,n.next=5,e("_currentDiagram",null);case 5:return a=n.sent,c=Object.keys(r).filter(function(e){return!r[e]._deleted}),a&&!q()(r,"[current]._deleted")||(a=c.length>0?c[0]:Q()(),t("_currentDiagram",a)),o=r[a],n.abrupt("return",o||{_id:a});case 10:case"end":return n.stop()}},n)}));return function(){return n.apply(this,arguments)}}(),N=function(){var e=Object(f.a)(l.a.mark(function e(t){var n,r,a,c,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.name,r=t.edges,a=t.nodes,c=Q()(),o={_id:c,_name:n,_edges:r,_nodes:a},e.next=5,s(o);case 5:return e.abrupt("return",o);case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(f.a)(l.a.mark(function e(t){var n,r,a,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.id,r=t.name,n){e.next=3;break}throw new Error("Cannot find diagram to update.");case 3:return e.next=5,u();case 5:if(a=e.sent,c=a[n]){e.next=9;break}return e.abrupt("return");case 9:return c._name=r,e.next=12,s(c);case 12:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(f.a)(l.a.mark(function e(t){var n,r,a,o,u,s;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(Array.isArray(t)){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,c();case 4:return n=e.sent,e.next=7,i();case 7:for(r=e.sent,a=Object(m.a)({},r),o=Object(m.a)({},n),u=0;u<t.length;u++)Z()(a,"[".concat(t[u],"]"));return s=Object.keys(o),t.forEach(function(e){var t=[];s.forEach(function(n){(o[n]||[]).forEach(function(r,a){r&&r.node===e&&t.push({index:a,key:n})})}),Z()(o,"[".concat(e,"]")),t.forEach(function(e){Z()(o,"[".concat(e.key,"][").concat(e.index,"]"))})}),e.next=15,d(o);case 15:return e.next=17,b(a);case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(f.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:return t=e.sent,e.abrupt("return",t._name||"");case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=Object(f.a)(l.a.mark(function e(t){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:if(n=e.sent,!(r=n[t])){e.next=17;break}return r._deleted=!0,e.next=8,s(r);case 8:if(!(Object.values(n).filter(function(e){return!e._deleted}).length>1)){e.next=16;break}return e.next=12,u();case 12:n=e.sent,O(Object.keys(n)[0]),e.next=17;break;case 16:localStorage.removeItem("_currentDiagram");case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=Object(f.a)(l.a.mark(function e(t){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u();case 2:if(n=e.sent,!(r=n[t])){e.next=17;break}return r._deleted=!1,e.next=8,s(r);case 8:if(!(Object.values(n).filter(function(e){return!e._deleted}).length>1)){e.next=16;break}return e.next=12,u();case 12:n=e.sent,O(Object.keys(n)[0]),e.next=17;break;case 16:localStorage.removeItem("_currentDiagram");case 17:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(f.a)(l.a.mark(function e(t){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c();case 2:return n=e.sent,r=q()(n,"[".concat(t,"].length")),console.log(r),Object.values(n).forEach(function(e){e.forEach(function(e){q()(e,"node")===t&&r++})}),e.abrupt("return",r||1);case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return{getNodes:i,getEdges:c,addNode:h,removeEdge:y,countEdges:I,removeDirectedEdge:g,getDiagrams:u,updateNodePosition:r,updateBatchNodePositions:a,saveUploadedData:E,getCurrentDiagram:C,deleteDiagram:_,restoreDiagram:A,deleteNodes:S,makeNewDiagram:N,getNodesArray:o,setCurrentDiagram:O,getTitle:F,setDiagramName:D,makeNode:k}}(),ee=n(58),te=function(){var e=[],t=[],n={},r=null,a=null,c=function(){return{nodes:new ee.a(e),edges:new ee.a(t)}},o={withEdges:function(e){return t=e,o},withNodes:function(t){return e=t,o},withOptions:function(e){return n=e,o},inContainer:function(e){return r=e,o},build:function(){return a||(a=new ee.b(r,c(),n)).once("afterDrawing",function(){a.fit({animation:{duration:600,easingFunction:"easeInOutQuad"}})}),{network:a,setData:function(n){var r=n.nodes,o=n.edges;e=r,t=o,a.setData(c())},updateNodePosition:$.updateNodePosition,getNodes:function(){return e},getEdges:function(){return t}}}};return o}(),ne=function(e,t){return Object(r.useEffect)(function(){if("function"===typeof t)return U.subscribe(e,t),function(){return U.unsubscribe(e,t)}},[e,t]),function(t){return U.next(e,t)}},re=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,a=Object(r.useRef)();Object(r.useEffect)(function(){a.current=t},[t]),Object(r.useEffect)(function(){if(n&&n.addEventListener){var t=function(e){return a.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}},[e,n])},ae=function(e,t){switch(t.type){case"update":var n=t.nodes,r=t.edges;return ue(n,r);default:return e}},ce=function(e){switch(e){case"custom":return"#005481";case"builtin":return"#9e6614";default:return"#A0A0A0"}},oe=function(e){var t=q()(e,"data.read"),n=q()(e,"data.write");return t&&n?"middle, from":n?"middle":"to"},ie=function(e,t){var n=q()(t,"[".concat(e,"].length"),0);return Object.values(t).forEach(function(t){t.forEach(function(t){q()(t,"node")===e&&n++})}),n>5?n:1},ue=function(e,t){var n={nodes:[],edges:[]};return Object.keys(e||{}).forEach(function(r){var a=e[r];n.nodes.push(Object(m.a)({id:a.id,type:a.data.type},function(e){switch(e){case"cloud":return{shape:"icon",shapeProperties:{size:25},icon:{face:"Ionicons",code:"\uf2c9",color:"#FFF"}};case"external":return{shape:"icon",shapeProperties:{size:25},icon:{face:"Ionicons",code:"\uf381",color:"#FFF"}};case"oncampus":default:return{shape:"dot",size:15}}}(a.data.type),{label:a.data.name,edges:a.edges,font:{color:"#363534",strokeWidth:2,strokeColor:"#FFFFFF"},scaling:{min:15,max:40,label:{enabled:!0},customScalingFunction:function(e,t,n,r){if(e===t)return.5;var a=1/(t-e);return Math.max(0,(r-e)*a)}},value:ie(r,t),shadow:{enabled:!0,size:4,x:1,y:1},data:Object(m.a)({},a.data),color:"#FFFFFF",x:q()(a,"position.x"),y:q()(a,"position.y")}))}),Object.keys(t||{}).forEach(function(e){t[e].forEach(function(t){t&&n.edges.push({from:e,to:t.node,smooth:{enabled:!0,type:"cubicBezier",roundness:.2},color:{color:ce(q()(t,"data.type.id")),hover:"#501214",highlight:"#501214"},dashes:"custom"===q()(t,"data.type.id"),type:q()(t,"data.type",{}),arrows:oe(t)})})}),n},se=function(){var e=Object(r.useReducer)(ae,{nodes:[],edges:[]}),t=Object(p.a)(e,2),n=t[0],c=t[1],o=Object(r.useState)(),i=Object(p.a)(o,2),u=i[0],d=i[1],m=Object(r.useRef)({}),b=Object(r.useRef)(),h=Object(r.useRef)([]),x=Object(r.useRef)(!1),v=Object(r.useRef)(),g=Object(r.useRef)(),y=function(){var e=Object(f.a)(l.a.mark(function e(){var t,n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getNodes();case 2:return t=e.sent,e.next=5,$.getEdges();case 5:n=e.sent,h.current=[],x.current=!1,c({type:"update",nodes:t,edges:n});case 9:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),k=ne("graph-data-updated",y),w=Object(r.useCallback)(Object(f.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Array.isArray(h.current)&&h.current.length>0)){e.next=8;break}return e.next=3,$.deleteNodes(h.current);case 3:m.current.scale=g.current.network.getScale(),m.current.position=g.current.network.getViewPosition(),h.current=[],b.current=null,k();case 8:case"end":return e.stop()}},e)})),[k]);Object(r.useEffect)(function(){y()},[]);var O=ne("display-node-details");ne("node-search-result",function(e){if(g.current.network){if(e.length<=0){var t=g.current.network.getSelectedNodes();return g.current.network.unselectAll(),void(t.length>0&&g.current.network.fit({animation:{duration:300,easingFunction:"easeInOutQuad"}}))}g.current.network.selectNodes(e),g.current.network.fit({nodes:e,animation:{duration:300,easingFunction:"easeInOutQuad"}})}});var j=Object(r.useCallback)(function(e){var t=q()(e,"nodes[0]",null);if(!(e.nodes.length>1||x)&&t&&!g.current.network.isCluster(t)&&!x.current){var r=n.nodes.find(function(e){return e.id===t});r&&d(r)}},[n.nodes]),E=Object(r.useCallback)(function(e){var t=g.current.network.getNodeAt(e.pointer.DOM);if(t){if(!g.current.network.isCluster(t)&&!x.current){var r=n.nodes.find(function(e){return e.id===t});r&&d(r)}if(x.current&&e.nodes[0]){var a=[].concat(Object(s.a)(h.current),[e.nodes[0]]);h.current=a,g.current.network.selectNodes(a)}}else h.current=[]},[n.nodes]),C=Object(r.useCallback)(function(e){if(e.nodes.length>0){var t=g.current.network.getPositions(e.nodes);$.updateBatchNodePositions(t)}},[]),N=Object(r.useCallback)(function(e){46!==e.keyCode&&8!==e.keyCode||U.next("delete-selected-nodes"),e.ctrlKey&&70===e.keyCode&&(e.preventDefault(),U.next("focus-search-bar")),e.shiftKey&&!x.current&&(x.current=!0)},[x]),D=Object(r.useCallback)(function(e){!e.shiftKey&&x.current&&(x.current=!1)},[x]);re("keydown",N),re("keyup",D),Object(r.useEffect)(function(){u&&O(u)},[u,O]);return ne("deselect-active-node",function(){return d(null)}),ne("node-added",function(e){b.current=e,m.current.scale=g.current.network.getScale(),m.current.position=g.current.network.getViewPosition()}),ne("delete-selected-nodes",w),Object(r.useEffect)(function(){if(g.current){if(g.current.network.off("selectNode"),g.current.network.off("dragEnd"),g.current.network.off("click"),g.current.network.on("selectNode",j),g.current.network.on("click",E),g.current.network.on("dragEnd",C),g.current.setData(n),m.current.position&&m.current.scale&&!b.current)g.current.network.moveTo({position:m.current.position,scale:m.current.scale}),m.current={};else if(b.current)try{g.current.network.fit({nodes:[b.current],animation:{duration:300,easingFunction:"easeInOutQuad"}}),g.current.network.selectNodes([b.current]),m.current={}}catch(r){b.current=null}}else{var e=new Date,t=te.inContainer(v.current).withEdges(n.edges).withNodes(n.nodes).withOptions({autoResize:!0,interaction:{hover:!0,hoverConnectedEdges:!0},physics:{enabled:!1}}).build();console.log("Network Build Time: ".concat(new Date-e,"ms")),g.current=t,g.current.network.on("selectNode",j),g.current.network.on("dragEnd",C),g.current.network.on("click",E),document.addEventListener("contextmenu",function(e){return e.preventDefault()},!1)}},[n,E,C,j]),a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{style:{position:"relative",overflow:"hidden",height:"100%"},ref:v,id:"graph"}),a.a.createElement(G,null))},de=n(158),le=n(167),fe=n(85),pe=n.n(fe),me=function(){var e=Object(f.a)(l.a.mark(function e(){var t,n,r,a,c,o,i;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getCurrentDiagram();case 2:t=e.sent,n=q()(t,"_name","Default Name"),r=Object.keys(q()(t,"_edges",{})),t._edges&&r.forEach(function(e){t._edges[e]=t._edges[e].filter(function(e){return null!==e})}),a=JSON.stringify({id:q()(t,"_id"),name:q()(t,"_name","Generic and Unnamed Diagram With Exceptionally Long Title"),nodes:q()(t,"_nodes",{}),edges:q()(t,"_edges",{})}),c=document.createElement("a"),o=new Blob([a],{type:"text/plain"}),i="".concat(n," - ").concat(pe()().format("YYYY-MM-DD[T]HHmmss"),".json"),window.navigator.msSaveOrOpenBlob?window.navigator.msSaveBlob(o,i):(c.setAttribute("href","data:text/plain;charset=utf-8,".concat(a)),c.setAttribute("download",i),c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c));case 11:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),be=function(e){var t=new FileReader;t.readAsBinaryString(e.target.files[0]),t.onloadend=Object(f.a)(l.a.mark(function e(){var n,r,a,c,o,i,u;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.parse(t.result),r=Object.keys(q()(n,"edges",{})),n.edges&&r.forEach(function(e){n.edges[e]=n.edges[e].filter(function(e){return null!==e})}),a=q()(n,"edges",{}),c=q()(n,"nodes",{}),o=q()(n,"id",Q()()),i=q()(n,"name","Unnamed System"),e.next=9,$.getDiagrams();case 9:if(!(u=e.sent)[o]){e.next=13;break}return e.next=13,$.restoreDiagram(u[o]._id);case 13:return e.next=15,$.saveUploadedData({edges:a,nodes:c,name:i,id:o});case 15:U.next("graph-data-updated");case 16:case"end":return e.stop()}},e)}))},he=n(86),xe=n.n(he),ve=function(){var e=Object(f.a)(l.a.mark(function e(t,n){var r,a;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getNodesArray();case 2:r=e.sent,a=r&&r.filter(function(e){return q()(e,"data.name","").toLowerCase().includes(n.toLowerCase())}).map(function(e){return e.id}),n||(a=[]),U.next("node-search-result",a);case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){return a.a.createElement(le.a,{id:"search-box-nodes",placeholder:"Search",className:"searchBox",styles:{root:{width:"250px",alignSelf:"center"}},onChange:xe()(ve,500)})},ye=function(e){var t=ne("toggle-system-form"),n=ne("toggle-diagram-form"),c=ne("open-diagram-browser");Object(r.useEffect)(function(){U.subscribe("focus-search-bar",function(){document.querySelector("#search-box-nodes").focus()})},[]);var o=[{key:"open",name:"Open Diagram",iconProps:{iconName:"OpenFile"},onClick:c},{key:"search",onRender:ge}],i=[{key:"add",name:"Add",iconProps:{iconName:"Add"},subMenuProps:{items:[{key:"system",name:"System",onClick:t,iconProps:{iconName:"GitGraph"}},{key:"diagram",name:"Diagram",onClick:n,iconProps:{iconName:"VisioDiagram"}}]}},{key:"upload",name:"Upload",iconProps:{iconName:"Upload"},onClick:function(){!function(){var e=document.createElement("input");e.setAttribute("type","file"),e.setAttribute("accept",".json"),e.style.display="none",e.addEventListener("change",be),e.click()}()}},{key:"download",name:"Download",iconProps:{iconName:"Download"},onClick:function(){var e=Object(f.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:me();case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()}];return a.a.createElement("div",null,a.a.createElement(de.a,{styles:{root:{boxShadow:"0 2px 2px #30303030"}},items:i,farItems:o}))},ke=n(168),we=n(16),Oe=n(162),je=n(94),Ee=n(156),Ce=n(39),Ne=n.n(Ce),De=n(165),Se=n(170),Fe=n(5),_e=n(166),Ae=n(171),Ie=function(e,t){return function(n,r){return"read"===e?t||r||!1:"write"===e&&(t||n)||!1}},Pe=function(e){var t=e.read,n=e.write,r=e.onChange;return a.a.createElement(Oe.a,{style:{marginRight:8,marginTop:8},verticalAlign:"space-between",tokens:{childrenGap:4}},a.a.createElement(Ae.a,{checked:!!t,onChange:function(e,a){Ie("read",a)(t,n)&&r("read",a)},label:"Receives Data"}),a.a.createElement(Ae.a,{checked:!!n,onChange:function(e,a){Ie("write",a)(t,n)&&r("write",a)},label:"Sends Data"}))},Re=n(175);function Te(){var e=Object(i.a)(["\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n  justify-content: flex-start;\n  padding: 8px;\n  margin-top: 12px;\n  border: 1px solid rgb(138, 136, 134);\n  box-sizing: border-box;\n  border-radius: 1px;\n\n  & > .ms-Dropdown-container {\n    flex: 1;\n    width: 100%;\n    margin-right: 4px;\n  }\n\n  & > .ms-Button--icon {\n    align-self: flex-end;\n  }\n"]);return Te=function(){return e},e}var ze=u.b.div(Te()),Le=Object(Fe.z)({selectors:{"& .ms-ComboBox":{width:"100%"}}}),Me=function(e){var t=e.handleRemove,n=e.id,c=e.edit,o=e.addNodeForm,i=e.nodeFormErrors,u=e.setNodeFormErrors,s=e.existingSystems,d=e.updateNodeForm,l=q()(o,"connections[".concat(n,"].connectedTo.key"),null),f=q()(o,"connections[".concat(n,"].connectionType.key"),null),p=q()(o,"connections[".concat(n,"].read"),!0),b=q()(o,"connections[".concat(n,"].write"),!1),h=q()(i,"[".concat(n,"].target")),x=q()(i,"[".concat(n,"].type"));return Object(r.useEffect)(function(){c||d({path:"connections[".concat(n,"].read"),value:!0})},[d,n,c]),a.a.createElement(ze,null,a.a.createElement(Re.a,{iconProps:{iconName:"ChromeClose"},onClick:function(){q()(o,"connections[".concat(n,"]"),null)&&d({path:"connections[".concat(n,"]"),type:"remove"}),t()}}),a.a.createElement(Se.a,{style:{alignSelf:"stretch"},className:Le},a.a.createElement(_e.a,{allowFreeform:!0,autoComplete:"on",autofill:!0,label:"Connected To",placeholder:"What does this system connect to?",options:s,errorMessage:h,selectedKey:l,onChange:function(e,t){if(d({path:"connections[".concat(n,"].connectedTo"),value:{key:t.key,text:t.text}}),"".concat(n)in i){var r=Object(m.a)({},i);delete r[n],u(r)}}})),a.a.createElement(De.a,{label:"Interface",options:[{key:"builtin",text:"Built In"},{key:"custom",text:"Custom"}],placeholder:"How does this system connect?",selectedKey:f,errorMessage:x,onChange:function(e,t){if(d({path:"connections[".concat(n,"].connectionType"),value:{key:t.key,text:t.text,color:t.color}}),"".concat(n)in i){var r=Object(m.a)({},i);delete r[n],u(r)}}}),a.a.createElement(Pe,{read:p,write:b,onChange:function(e,t){d({path:"connections[".concat(n,"].").concat(e),value:t})}}))},Be=n(161),Ye=n(97),Ge=a.a.memo(function(e){var t=e.selectedKey,n=e.onChange,r=e.required,c=e.errorMessage;return a.a.createElement(De.a,{required:r,label:"System Type",options:[{key:"oncampus",text:"On Campus"},{key:"cloud",text:"Cloud"},{key:"external",text:"External"}],errorMessage:c,placeholder:"Where does this system live?",selectedKey:t,onChange:n})},function(e,t){var n=e.selectedKey===t.selectedKey,r=e.errorMessage===t.errorMessage;return n&&r}),Ke=function(e){var t=e.nodeFormErrors,n=e.existingSystems,r=e.setNodeFormErrors,c=e.addNodeForm,o=e.updateNodeForm,i=e.connections,u=e.addConnection,s=e.edit;return e.loading?null:a.a.createElement(a.a.Fragment,null,a.a.createElement(Be.a,{label:"Name",placeholder:"Choose a name",errorMessage:t.name,required:!0,onGetErrorMessage:function(e){var a=String(e).toLowerCase();if(n.some(function(e){var t=e.text;return String(t).toLowerCase()===a})&&!s)r(Object(m.a)({},t,{name:"The ".concat(e," system already exists")}));else if(t.name){var c=Object(m.a)({},t);delete c.name,r(c)}},onChange:function(e,t){return o({path:"name",value:t})},value:c.name||""}),a.a.createElement(Ge,{required:!0,errorMessage:t.type,selectedKey:c.type||null,onChange:function(e,n){if(o({path:"type",value:n.key}),"type"in t){var a=Object(m.a)({},t);delete a.type,r(a)}}}),a.a.createElement(Be.a,{label:"Department",placeholder:"Was this built for another department?",onChange:function(e,t){return o({path:"department",value:t})},value:c.department||""}),a.a.createElement(Be.a,{label:"URL",placeholder:"Is there a url to access this system?",errorMessage:t.url,onChange:function(e,n){if(o({path:"url",value:n}),"url"in t){var a=Object(m.a)({},t);delete a.url,r(a)}},onGetErrorMessage:function(e){if(e)return function(e){if(e)try{if(new URL(e))return""}catch(t){return t.message}}(e)},value:c.url||""}),a.a.createElement(Be.a,{label:"Description",placeholder:"Enter some information others may want to know about this system",multiline:!0,rows:4,onChange:function(e,t){return o({path:"description",value:t})},value:c.description||""}),function(e){var t=e.connections,n=e.existingSystems,r=e.addNodeForm,c=e.updateNodeForm,o=e.setNodeFormErrors,i=e.nodeFormErrors;return t.map(function(e){return a.a.cloneElement(e,{existingSystems:n,addNodeForm:r,updateNodeForm:c,setNodeFormErrors:o,nodeFormErrors:i})})}({connections:i,existingSystems:n,addNodeForm:c,updateNodeForm:o,setNodeFormErrors:r,nodeFormErrors:t}),a.a.createElement(Ye.a,{onClick:u,iconProps:{iconName:"Add"}},"Add Connection"))},Ue=function(e,t){var n={};return e.edges.forEach(function(e){n[e.id]={read:e.data.read,write:e.data.write,connectionType:{key:e.data.type.id,text:e.data.type.label},connectedTo:{key:e.id,text:q()(t.filter(function(t){return t.id===e.id}),"[0].data.name","")}}}),n},Xe=function(e,t){if(""===t.path)return{};var n=Object(m.a)({},e);switch(t.type){case"remove":return Z()(n,t.path),n;case"edit":return Object(m.a)({},t.formState);default:return Ne()(n,t.path,t.value),n}},qe=function(e,t){switch(t.type){case"add":var n=Q()();return[].concat(Object(s.a)(e),[a.a.createElement(Me,{key:n,id:n,handleRemove:function(){return t.dispatch({type:"remove",id:n})}})]);case"remove":return e.filter(function(e){return e.key!==t.id});case"reset":return[];case"edit":return Object.keys(t.connections).map(function(e){var n=e,r=q()(t,"dispatch",null);return r&&n?a.a.createElement(Me,{edit:!0,key:n,id:n,handleRemove:function(){return r({type:"remove",id:n})}}):null}).filter(function(e){return e});default:return e}},He=function(){var e=Object(f.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getNodesArray();case 2:return t=e.sent,e.abrupt("return",t.map(function(e){return{key:e.id,text:e.data.name}}).sort(function(e,t){return e.text<t.text?-1:e.text>t.text?1:0}));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),Je=function(e,t){var n={};if(t&&(n=Object(m.a)({},t)),e.type||(n.type="A system type must be selected"),e.name||(n.name="A system name is required"),e.url){var r=function(e){if(e)try{if(new URL(e))return null}catch(t){return t.message}}(e.url);r&&(n.url=r)}e.connections&&Object.keys(e.connections||{}).forEach(function(t){var r=q()(e,"connections[".concat(t,"].connectedTo.key"),null);q()(e,"connections[".concat(t,"].connectionType.key"),null)||Ne()(n,"[".concat(t,"].type"),"The connection must have a type selected"),r||Ne()(n,"[".concat(t,"].target"),"You must select another system to connect to")});return n},We=function(e){var t=Object(r.useState)(!0),n=Object(p.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(!1),u=Object(p.a)(i,2),s=u[0],d=u[1],b=Object(r.useState)(!1),h=Object(p.a)(b,2),x=h[0],v=h[1],g=Object(r.useReducer)(Xe,{}),y=Object(p.a)(g,2),k=y[0],w=y[1],O=Object(r.useState)(),j=Object(p.a)(O,2),E=j[0],C=j[1],N=Object(r.useState)({}),D=Object(p.a)(N,2),S=D[0],F=D[1],_=Object(r.useReducer)(qe,[]),A=Object(p.a)(_,2),I=A[0],P=A[1],R=function(){return w({path:"",value:{}})},T=function(){return P({type:"reset"})};ne("edit-system-panel",function(e){var t=function(e){var t=te.build(),n=t.network,r=t.getNodes,a=n.getConnectedNodes(e.id),c=r().filter(function(e){var t=e.id;return a.includes(t)});return{name:q()(e,"data.name"),id:q()(e,"id"),type:q()(e,"data.type"),department:q()(e,"data.department"),url:q()(e,"data.url"),description:q()(e,"data.description"),connections:Ue(e,c)}}(e);P({type:"edit",connections:t.connections||{},dispatch:P}),w({type:"edit",formState:t}),d(!0),v(!0)});var z=function(){var e=Object(f.a)(l.a.mark(function e(){var t,n,r,a,c,o;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=Je(k,S),!(Object.keys(t).length>0)){e.next=4;break}return F(Object(m.a)({},S,t)),e.abrupt("return");case 4:if(n=q()(k,"connections",{}),r={description:q()(k,"description",""),name:q()(k,"name",""),type:q()(k,"type",""),url:q()(k,"url",""),department:q()(k,"department","")},a=null,!s){e.next=16;break}return e.next=10,$.makeNode({id:k.id,connections:n,data:r});case 10:return c=e.sent,a=k.id,e.next=14,$.addNode(c);case 14:e.next=22;break;case 16:return e.next=18,$.makeNode({connections:n,data:r});case 18:return o=e.sent,a=o.id,e.next=22,$.addNode(o);case 22:B(),Y(a),T(),R(),s&&L();case 27:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();ne("toggle-system-form",function(){return v(!x)});var L=function(){R(),T(),v(!1),d(!1)},M=function(){var e=Object(f.a)(l.a.mark(function e(){var t;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He();case 2:t=e.sent,o(!1),C(t);case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();Object(r.useEffect)(function(){M()},[]);var B=ne("graph-data-updated",M),Y=ne("node-added");return a.a.createElement(ke.a,{headerText:"".concat(s?"Edit":"Add"," System"),isOpen:x,onDismiss:L,isFooterAtBottom:!0,onRenderFooterContent:function(){return a.a.createElement(Oe.a,{horizontal:!0,horizontalAlign:"space-between",tokens:{childrenGap:12}},a.a.createElement(je.a,{text:"Cancel",onClick:L}),a.a.createElement(Ee.a,{text:"Save System",onClick:z}))},type:we.a.medium},a.a.createElement(Ke,{loading:c,edit:s,existingSystems:E,nodeFormErrors:S,setNodeFormErrors:F,addNodeForm:k,updateNodeForm:w,connections:I,addConnection:function(){P({type:"add",dispatch:P,existingSystems:E,addNodeForm:k,updateNodeForm:w})}}))},Qe=n(169),Ve=function(e){var t=e.description,n=e.department,r=e.url;return a.a.createElement(Oe.a,{tokens:{childrenGap:8}},a.a.createElement(Oe.a,{tokens:{childrenGap:4}},a.a.createElement(Qe.a,{style:{textDecoration:"underline"},variant:"mediumPlus"},"URL"),a.a.createElement("a",{href:r,target:"_blank",rel:"noopener noreferrer"},r)),a.a.createElement(Oe.a,{tokens:{childrenGap:4}},a.a.createElement(Qe.a,{style:{textDecoration:"underline"},variant:"mediumPlus"},"Department"),a.a.createElement(Qe.a,null,n)),a.a.createElement(Oe.a,{tokens:{childrenGap:4}},a.a.createElement(Qe.a,{style:{textDecoration:"underline"},variant:"mediumPlus"},"Description"),a.a.createElement(Qe.a,null,t)))};function Ze(){var e=Object(i.a)(["\n  & > .ms-Panel-main {\n    transition: width 300ms ease-in-out;\n  }\n"]);return Ze=function(){return e},e}var $e=Object(u.b)(ke.a)(Ze()),et=function(e){var t=Object(r.useState)(!1),n=Object(p.a)(t,2),c=n[0],o=n[1],i=Object(r.useState)(null),u=Object(p.a)(i,2),s=u[0],d=u[1];ne("display-node-details",function(e){d(e),o(!0)});var l=ne("edit-system-panel"),f=ne("deselect-active-node"),m=q()(s,"data.name","Very Unnamed System"),b=q()(s,"data.description","No description has been entered."),h=q()(s,"data.department","No department has been entered."),x=q()(s,"data.url","".concat(m," has no url")),v=function(){l(s),o(!1),f()};return a.a.createElement($e,{isOpen:c,onDismiss:function(){f(),o(!1)},onRenderHeader:function(e){return a.a.createElement(Oe.a,{horizontal:!0,tokens:{childrenGap:12}},a.a.createElement(Qe.a,{variant:"xLarge",style:{marginLeft:16,marginBottom:12}},e.headerText),a.a.createElement(Re.a,{iconProps:{iconName:"Edit"},onClick:v}))},isLightDismiss:!0,type:we.a.customNear,customWidth:400,headerText:m},a.a.createElement(Ve,{department:h,description:b,url:x}))};function tt(){var e=Object(i.a)(["\n  ","\n  animation-delay: -0.9s;\n"]);return tt=function(){return e},e}function nt(){var e=Object(i.a)(["\n  ","\n"]);return nt=function(){return e},e}function rt(){var e=Object(i.a)(["\n  background-color: #501214;\n  width: 15px;\n  height: 15px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  \n  -webkit-animation: "," 1.8s infinite ease-in-out;\n  animation: "," 1.8s infinite ease-in-out;\n"]);return rt=function(){return e},e}function at(){var e=Object(i.a)(["\n  margin: 100px auto;\n  width: 40px;\n  height: 40px;\n  align-self: center;\n  justify-self: center;\n  position: relative;\n"]);return at=function(){return e},e}function ct(){var e=Object(i.a)(["\n    25% { \n      transform: translateX(42px) rotate(-90deg) scale(0.5);\n      -webkit-transform: translateX(42px) rotate(-90deg) scale(0.5);\n    } 50% { \n      transform: translateX(42px) translateY(42px) rotate(-179deg);\n      -webkit-transform: translateX(42px) translateY(42px) rotate(-179deg);\n    } 50.1% { \n      transform: translateX(42px) translateY(42px) rotate(-180deg);\n      -webkit-transform: translateX(42px) translateY(42px) rotate(-180deg);\n    } 75% { \n      transform: translateX(0px) translateY(42px) rotate(-270deg) scale(0.5);\n      -webkit-transform: translateX(0px) translateY(42px) rotate(-270deg) scale(0.5);\n    } 100% { \n      transform: rotate(-360deg);\n      -webkit-transform: rotate(-360deg);\n    }\n"]);return ct=function(){return e},e}var ot=Object(u.c)(ct()),it=u.b.div(at()),ut=Object(u.a)(rt(),ot,ot),st=u.b.div(nt(),ut),dt=u.b.div(tt(),ut),lt=function(e){return a.a.createElement(it,null,a.a.createElement(st,null),a.a.createElement(dt,null))},ft=n(163),pt=n(174);function mt(){var e=Object(i.a)([""]);return mt=function(){return e},e}function bt(){var e=Object(i.a)(["\n  padding: 12px;\n  margin-right: 40px;\n"]);return bt=function(){return e},e}function ht(){var e=Object(i.a)(["\n  padding-top: 24px;\n"]);return ht=function(){return e},e}function xt(){var e=Object(i.a)(["\n  padding: 12px;\n"]);return xt=function(){return e},e}var vt=Object(u.b)(Oe.a)(xt()),gt=Object(u.b)(Oe.a)(ht()),yt=Object(u.b)(Qe.a)(bt()),kt=Object(u.b)(Re.a).attrs(function(){return{iconProps:{iconName:"ChromeClose"}}})(mt()),wt=function(e){var t=e.dismiss,n=e.form,c=e.setForm,o=e.setErrors,i=e.submit,u=e.errors,s=Object(r.useCallback)(function(e,t){t&&o({type:"remove",path:"name"}),c({type:"update",path:"name",value:t})},[c,o]),d=Object(r.useCallback)(function(e,t){c({type:"update",path:"copy",value:t})},[c]);return a.a.createElement(vt,{tokens:{childrenGap:12}},a.a.createElement(Oe.a,{horizontal:!0},a.a.createElement(yt,{variant:"xxLarge"},"Add New Diagram"),a.a.createElement(kt,{onClick:t})),a.a.createElement(Be.a,{label:"Name",placeholder:"Enter a name for your diagram",errorMessage:u.name||"",value:n.name||"",onChange:s}),a.a.createElement(pt.a,{inlineLabel:!0,onText:"On",offText:"Off",label:"Copy Current Diagram",checked:n.copy||!1,onChange:d}),a.a.createElement(gt,{horizontal:!0,horizontalAlign:"space-between"},a.a.createElement(je.a,{text:"Cancel",onClick:t}),a.a.createElement(Ee.a,{text:"Submit",onClick:i})))},Ot=function(e,t){if(""===t.path)return{};switch(t.type){case"remove":var n=Object(m.a)({},e);return t.path&&Z()(n,t.path),n;case"update":var r=Object(m.a)({},e);return Ne()(r,t.path,t.value);default:return e}},jt=function(e){var t={};return e.name||(t.name="Diagrams must have a name, c'mon it's one text field"),t},Et=function(e){var t=e.initialForm,n=Object(r.useState)(!1),c=Object(p.a)(n,2),o=c[0],i=c[1],u=Object(r.useReducer)(Ot,t||{}),s=Object(p.a)(u,2),d=s[0],m=s[1],b=Object(r.useReducer)(Ot,{}),h=Object(p.a)(b,2),x=h[0],v=h[1],g=Object(r.useCallback)(function(){i(!0)},[i]),y=Object(r.useCallback)(function(){i(!1)},[i]);ne("toggle-diagram-form",g);var k=ne("graph-data-updated"),w=Object(r.useCallback)(Object(f.a)(l.a.mark(function e(){var t,n,r,a,c;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=jt(d)).name){e.next=5;break}v({type:"update",path:"name",value:t.name}),e.next=22;break;case 5:if(n=d.copy,r={name:d.name},!n){e.next=14;break}return e.next=10,$.getNodes();case 10:return r.nodes=e.sent,e.next=13,$.getEdges();case 13:r.edges=e.sent;case 14:return e.next=16,$.makeNewDiagram(r);case 16:return a=e.sent,c=a._id,y(),e.next=21,$.setCurrentDiagram(c);case 21:k();case 22:case"end":return e.stop()}},e)})),[v,d,y,k]);return a.a.createElement(ft.a,{isBlocking:!1,onDismiss:y,isOpen:o},a.a.createElement(wt,{form:d,setForm:m,setErrors:v,errors:x,submit:w,dismiss:y}))};function Ct(){var e=Object(i.a)(["\n  display: flex;\n  flex: 1;\n  justify-content: space-between;\n  align-items: center;\n  padding: 8px;\n  cursor: default;\n\n  &:hover {\n    background-color: ","\n  }\n\n  transition: background-color 200ms ease-in-out;\n"]);return Ct=function(){return e},e}function Nt(){var e=Object(i.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return Nt=function(){return e},e}var Dt=u.b.div(Nt()),St=u.b.div.attrs(function(e){return{backgroundColor:e.edit?"transparent":"rgb(237, 235, 233)"}})(Ct(),function(e){return e.backgroundColor}),Ft=function(e){var t=e.edit,n=e.name,c=e.onChange,o=e.toggleEdit,i=Object(r.useCallback)(function(e){13===e.which&&o()},[o]);return t?a.a.createElement(Be.a,{onKeyDown:i,styles:{root:{flex:1}},placeholder:"Enter a name for this system",value:n,onChange:c}):a.a.createElement(Qe.a,{styles:{root:{userSelect:"none"}},variant:"large"},n||"No Name Set")},_t=function(e){var t=e.name,n=e.id,c=(e.handleSelect,Object(r.useState)(!1)),o=Object(p.a)(c,2),i=o[0],u=o[1],s=Object(r.useState)(t),d=Object(p.a)(s,2),m=d[0],b=d[1],h=ne("graph-data-updated"),x=ne("diagram-deleted"),v=Object(r.useCallback)(Object(f.a)(l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.setDiagramName({id:n,name:m});case 2:h();case 3:case"end":return e.stop()}},e)})),[h,m,n]);Object(r.useEffect)(function(){v()},[v]);var g=Object(r.useCallback)(function(){u(function(e){return!e})},[u]),y=Object(r.useCallback)(function(){var e=Object(f.a)(l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.setCurrentDiagram(n);case 2:h();case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[n,h]),k=Object(r.useCallback)(function(){var e=Object(f.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$.getCurrentDiagram();case 2:return n=e.sent,e.next=5,$.deleteDiagram(n._id);case 5:h(),x();case 7:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[h,x]),w=Object(r.useCallback)(function(e,t){b(t)},[b]);return a.a.createElement(St,{onClick:i?function(){return null}:y,edit:i},a.a.createElement(Ft,{toggleEdit:g,edit:i,name:m,onChange:w}),a.a.createElement("div",{style:{display:"flex",alignItems:"center",justifyItems:"flex-end",flexDirection:"row"}},a.a.createElement(Ye.a,{styles:{root:{justifySelf:"flex-end"}},text:"Edit",iconProps:{iconName:"Edit"},onClick:g}),a.a.createElement(Ye.a,{styles:{root:{justifySelf:"flex-end"}},text:"Delete",iconProps:{iconName:"Delete"},onClick:k})))},At=function(e){var t=e.diagrams;return t.length<=0?a.a.createElement(Dt,null,a.a.createElement(Qe.a,{styles:{root:{flex:1,paddingLeft:8,paddingRight:8,textAlign:"center"}},variant:"xxLargePlus"},"No Diagrams Are Saved")):a.a.createElement(Dt,null,t.map(function(e){return a.a.createElement(_t,{key:e._id,name:e._name,id:e._id})}))};function It(){var e=Object(i.a)(["\n  width: 600px;\n  padding: 12px;\n\n  @media only screen and (max-width: 767px) {\n    width: 100vw;\n    padding: 12px 0;\n  }\n"]);return It=function(){return e},e}At.defaultProps={diagrams:[]};var Pt=u.b.div(It()),Rt=function(e){var t=e.diagrams,n=e.loading;return a.a.createElement(Pt,null,n?a.a.createElement(lt,null):a.a.createElement(At,{diagrams:t}))},Tt=function(e,t){switch(t.type){case"loading":return Object(m.a)({},e,{loading:!0});case"success":return Object(m.a)({},e,{diagrams:t.diagrams,loading:!1});case"failure":return Object(m.a)({},e,{loading:!1,error:t.error});default:return e}},zt=function(){var e=Object(f.a)(l.a.mark(function e(t){var n,r;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"loading"}),e.prev=1,e.next=4,$.getDiagrams();case 4:n=e.sent,r=Object.values(n).filter(function(e){return!e._deleted}),t({type:"success",diagrams:r}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"failure",error:e.t0});case 12:case"end":return e.stop()}},e,null,[[1,9]])}));return function(t){return e.apply(this,arguments)}}(),Lt=function(e){var t=Object(r.useState)(!1),n=Object(p.a)(t,2),c=n[0],o=n[1],i=Object(r.useReducer)(Tt,{diagrams:[],loading:!0}),u=Object(p.a)(i,2),s=u[0],d=u[1],l=Object(r.useCallback)(function(){o(!0)},[o]),f=Object(r.useCallback)(function(){o(!1)},[o]),m=Object(r.useCallback)(function(){c&&zt(d)},[c,d]);return ne("open-diagram-browser",l),ne("diagram-deleted",m),Object(r.useEffect)(function(){c&&zt(d)},[c,d]),a.a.createElement(ft.a,{isOpen:c,onDismiss:f},a.a.createElement(Rt,{diagrams:s.diagrams,loading:s.loading}))};function Mt(){var e=Object(i.a)(["\n  position: absolute;\n  top: 60px;\n  right: 16px;\n  display: ",";\n  align-items: flex-start;\n  justify-content: center;\n  padding: 8px 12px 8px 8px;\n  background-color: white;\n  border-radius: 2px;\n  box-shadow: 0 3px 5px #30303030;\n  z-index: 10;\n\n  @media only screen and (max-width: 767px) {\n    display: none;\n  }\n"]);return Mt=function(){return e},e}var Bt=u.b.div.attrs(function(e){return{display:e.title?"flex":"none"}})(Mt(),function(e){return e.display}),Yt=function(e,t){switch(t.type){case"loading":return Object(m.a)({},e,{loading:!0});case"success":return Object(m.a)({},e,{title:t.title,loading:!1});case"failure":return Object(m.a)({},e,{loading:!1,error:t.error});default:return e}},Gt=function(){var e=Object(f.a)(l.a.mark(function e(t){var n;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"loading"}),e.prev=1,e.next=4,$.getTitle();case 4:n=e.sent,t({type:"success",title:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),t({type:"failure",error:e.t0});case 11:case"end":return e.stop()}},e,null,[[1,8]])}));return function(t){return e.apply(this,arguments)}}(),Kt=function(e){var t=Object(r.useReducer)(Yt,{}),n=Object(p.a)(t,2),c=n[0],o=n[1],i=Object(r.useCallback)(function(){Gt(o)},[o]);return Object(r.useEffect)(function(){i()},[i]),ne("graph-data-updated",i),c.loading?null:a.a.createElement(Bt,{title:c.title},a.a.createElement(Qe.a,{variant:"xLarge"},c.title))};function Ut(){var e=Object(i.a)(["\n  grid-area: footer;\n"]);return Ut=function(){return e},e}function Xt(){var e=Object(i.a)(["\n  grid-area: content;\n  overflow: auto;\n"]);return Xt=function(){return e},e}function qt(){var e=Object(i.a)(["\n  grid-area: sidebar;\n"]);return qt=function(){return e},e}function Ht(){var e=Object(i.a)(["\n  grid-area: header;\n  background-color: blue;\n"]);return Ht=function(){return e},e}function Jt(){var e=Object(i.a)(["\n  display: grid;\n  grid-template-columns: 1fr;\n  grid-template-rows: 44px 1fr;\n  grid-template-areas:\n    'header'\n    'content';\n  background-color: #ffffff;\n"]);return Jt=function(){return e},e}var Wt=u.b.div.attrs(function(e){return{sideSize:e.sidebarSize>=0?e.sidebarSize:200}})(Jt()),Qt=u.b.header(Ht()),Vt=u.b.section(qt()),Zt=u.b.section(Xt()),$t=u.b.footer(Ut()),en=function(e){var t=e.children,n=e.sidebarSize,r=e.className;return a.a.createElement(Wt,{sidebarSize:n,className:r},t)};function tn(){var e=Object(i.a)(["\n  background-color: #e8e3db;\n"]);return tn=function(){return e},e}function nn(){var e=Object(i.a)(["\n  height: 100vh;\n"]);return nn=function(){return e},e}en.Header=function(e){var t=e.children,n=e.className;return a.a.createElement(Qt,{className:n},t)},en.Sidebar=function(e){var t=e.children,n=e.className;return a.a.createElement(Vt,{className:n},t)},en.Content=function(e){var t=e.children,n=e.className;return a.a.createElement(Zt,{className:n},t)},en.Footer=function(e){var t=e.children,n=e.className;return a.a.createElement($t,{className:n},t)};var rn=en.Header,an=en.Content,cn=Object(u.b)(en)(nn()),on=Object(u.b)(an)(tn());var un=function(){return a.a.createElement(cn,{sidebarSize:0},a.a.createElement(rn,null,a.a.createElement(ye,null)),a.a.createElement(Kt,null),a.a.createElement(Et,null),a.a.createElement(Lt,null),a.a.createElement(on,null,a.a.createElement(se,null)),a.a.createElement(We,null),a.a.createElement(et,null))};n(122);Object(o.a)(),document.addEventListener("DOMContentLoaded",function(){Object(c.render)(a.a.createElement(un,null),document.getElementById("root"))})}},[[108,1,2]]]);
//# sourceMappingURL=main.51bd7ddd.chunk.js.map