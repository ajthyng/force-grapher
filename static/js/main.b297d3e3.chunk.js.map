{"version":3,"sources":["components/Legend/Legend.js","util/Subject.js","util/NodeManager.js","util/Graph.js","util/Network.js","hooks/useEvent.js","components/SystemsGraph/SystemsGraph.js","util/FileManager.js","components/CommandBar/CommandBar.js","components/SystemForm/ConnectionReadWrite.js","components/SystemForm/Connection.js","components/SystemForm/SystemType.js","components/SystemForm/SystemFormView.js","components/SystemForm/SystemForm.js","components/NodeDetail/NodeDetailView.js","components/NodeDetail/NodeDetail.js","components/Loading/Loading.js","App.js","index.js"],"names":["LegendContainer","styled","div","_templateObject","LegendIcon","i","_templateObject2","OnCampus","attrs","props","className","_templateObject3","External","_templateObject4","Cloud","_templateObject5","NodeContainer","_templateObject6","Label","span","_templateObject7","Node","Icon","icon","react_default","a","createElement","label","EdgeContainer","_templateObject8","EdgeStyle","_templateObject9","_ref","dashed","_ref2","color","EdgeStyleContainer","_templateObject10","Edge","Legend","Legend_Node","Legend_Edge","_handlers","Subject","subscribe","event","handler","push","unsubscribe","filter","func","next","_len","arguments","length","args","Array","_key","forEach","apply","Object","freeze","NodeManager","_get","key","defaultValue","JSON","parse","localStorage","getItem","_set","value","setItem","stringify","getEdges","getNodesObject","saveUploadedData","edges","nodes","getNodes","keys","reduce","acc","cur","_NodeManager","Graph","fixEdges","oldEdges","objectSpread","edgeKeys","didFix","nodeEdges","currentEdgeID","edge","node","otherEdges","otherEdgeIndex","findIndex","splice","updateNodePosition","asyncToGenerator","regenerator_default","mark","_callee","x","y","wrap","_context","prev","sent","position","abrupt","stop","_x","this","_ref3","_callee2","_edges","_fixEdges","_context2","getNodesArray","_ref4","_callee3","_context3","values","_ref5","_callee4","_context4","setEdges","_ref6","_callee5","_context5","_x2","setNodes","_ref7","_callee6","_context6","_x3","addNode","_ref8","_callee7","_nodes","_context7","id","Error","makeEdges","_x4","addEdge","_ref9","_callee8","node1","node2","data","_context8","isArray","addDirectedEdge","_x5","_x6","_x7","_ref10","_callee9","node2TargetID","_context9","_ref11","_x8","_x9","_x10","removeDirectedEdge","_ref12","_callee10","_context10","_ref13","_x11","_x12","removeEdge","_ref14","_callee11","_context11","_ref15","_x13","_x14","makeNode","_ref17","_callee12","_ref16","connections","connectionKeys","previousEdges","removeEdges","_context12","map","item","uuid","get","index","remove","info","concat","type","read","write","existingEdgeIndex","text","_x15","_ref18","_callee13","_loop","cleanup","_context14","prevEdge","_context13","find","_ref19","delegateYield","differenceby","_x16","_Graph","Network","_options","_container","_network","makeData","DataSet","builder","withEdges","withNodes","withOptions","options","inContainer","element","build","VisNetwork","once","fit","animation","duration","easingFunction","network","setData","_Network","useEvent","useEffect","systemsReducer","state","action","buildGraphData","getLinkColor","getArrowDirection","graphData","shape","shapeProperties","size","face","code","getShape","name","font","strokeWidth","strokeColor","shadow","enabled","nodeId","from","to","smooth","roundness","hover","highlight","dashes","arrows","SystemsGraph","_useReducer","useReducer","_useReducer2","slicedToArray","systems","systemsDispatch","_useState","useState","_useState2","activeNode","setActiveNode","graphContainer","useRef","graph","updateGraph","displayNodeDetails","results","current","selected","getSelectedNodes","unselectAll","selectNodes","handleNodeSelect","useCallback","params","isCluster","matchingNode","off","on","start","Date","systemGraph","autoResize","interaction","hoverConnectedEdges","physics","console","log","document","addEventListener","e","preventDefault","Fragment","style","overflow","height","ref","Legend_Legend","downloadFile","filename","setAttribute","encodeURIComponent","dayjs","format","display","body","appendChild","click","removeChild","handleFile","reader","FileReader","readAsBinaryString","target","files","onloadend","result","handleSearch","toLowerCase","includes","SearchNodes","SearchBox","placeholder","styles","root","width","alignSelf","onChange","debounce","CommandBar","toggleLeftPanel","farItems","onRender","nearItems","iconProps","iconName","onClick","uploadFile","_onClick","CommandBar_CommandBar","items","canChange","nextPath","nextValue","currentRead","currentWrite","ConnectionReadWrite","Stack","marginRight","marginTop","verticalAlign","tokens","childrenGap","Checkbox","checked","ConnectionContainer","Connection_templateObject","Connection","handleRemove","edit","addNodeForm","nodeFormErrors","setNodeFormErrors","existingSystems","updateNodeForm","selectedTarget","selectedType","selectedRead","selectedWrite","targetError","typeError","path","IconButton","Dropdown","errorMessage","selectedKey","errors","ConnectionReadWrite_ConnectionReadWrite","SystemType","React","memo","required","prevProps","nextProps","keysUnchanged","errorUnchanged","SystemFormView","addConnection","TextField","onGetErrorMessage","newSystem","String","some","department","url","URL","err","message","checkURL","multiline","rows","description","conn","cloneElement","renderConnections","ActionButton","makeConnections","system","connectionType","connectedTo","addNodeReducer","addNodeState","unset","formState","set","connectionReducer","toConsumableArray","Connection_Connection","dispatch","getSystems","sort","b","validate","SystemForm","setEdit","_useState3","_useState4","isOpen","setIsOpen","_useState5","_useState6","setExistingSystems","_useState7","_useState8","_useReducer3","_useReducer4","connDispatch","resetForm","resetConnections","_Network$build","getConnectedNodes","connectedNodes","makeFormState","submitSystem","_node","broadcastNodeSave","dismiss","Panel","headerText","onDismiss","isFooterAtBottom","onRenderFooterContent","horizontal","horizontalAlign","DefaultButton","PrimaryButton","PanelType","medium","SystemFormView_SystemFormView","NodeDetailView","Text","textDecoration","variant","href","CustomPanel","NodeDetail_templateObject","readWriteStatus","NodeDetail","setNode","editSystem","deselectActiveNode","NodeDetail_Connection","parseConnections","handleEdit","onRenderHeader","marginLeft","marginBottom","isLightDismiss","customNear","customWidth","NodeDetail_NodeDetailView","cubeMove","keyframes","Loading_templateObject","cubeCSS","Loading_templateObject2","css","Loading_templateObject3","Loading_templateObject4","Loading_templateObject5","Page","App_templateObject","App","CommandBar_CommandBar_CommandBar","SystemsGraph_SystemsGraph","SystemForm_SystemForm","NodeDetail_NodeDetail","initializeIcons","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.b297d3e3.chunk.js","sourcesContent":["import React from 'react'\nimport styled from 'styled-components'\n\nconst LegendContainer = styled.div`\n  transform: scale(0.3) translate3d(-392px, 450px, 0);\n  position: absolute;\n  bottom: 12px;\n  left: 12px;\n  width: 300px;\n  border: solid 2px #808080;\n  border-radius: 3px;\n  background-color: #e8e3db;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  display: flex;\n  padding: 12px;\n\n  @media only screen and (max-width: 767px) {\n    display: none;\n  }\n\n  transition: transform 300ms ease-in-out;\n\n  &:hover {\n    transform: scale(1) translate3d(0, 0, 0);\n  }\n`\n\nconst LegendIcon = styled.i`\n  color: white;\n  font-size: 60px;\n  text-shadow: 2px 2px 4px #808080;\n  margin: 8px;\n  min-width: 60px;\n`\n\nconst OnCampus = styled(LegendIcon).attrs(props => ({ className: 'ion-md-star' }))``\nconst External = styled(LegendIcon).attrs(props => ({ className: 'ion-md-square' }))``\nconst Cloud = styled(LegendIcon).attrs(props => ({ className: 'ion-md-cloud' }))``\n\nconst NodeContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: center;\n`\n\nconst Label = styled.span`\n  color: #363534;\n  font-size: 18px;\n`\n\nconst Node = props => {\n  const Icon = props.icon\n  return (\n    <NodeContainer>\n      <Icon />\n      <Label>{props.label}</Label>\n    </NodeContainer>\n  )\n}\n\nconst EdgeContainer = styled(NodeContainer)`\n  margin-top: 12px;\n  margin-bottom: 24px;\n`\n\nconst EdgeStyle = styled.div`\n  width: 45px;\n  min-width: 45px;\n  border-top: ${({ dashed }) => dashed ? 'dashed' : 'solid'} ${({ color }) => color} 4px;\n`\n\nconst EdgeStyleContainer = styled.div`\n  width: 60px;\n  min-width: 60px;\n  margin: 8px;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`\n\nconst Edge = props => {\n  const { color, label, dashed } = props\n  return (\n    <EdgeContainer>\n      <EdgeStyleContainer>\n        <EdgeStyle color={color} dashed={dashed} />\n      </EdgeStyleContainer>\n      <Label >{label}</Label>\n    </EdgeContainer>\n  )\n}\n\nexport const Legend = props => {\n  return (\n    <LegendContainer>\n      <Node icon={OnCampus} label='On Campus System' />\n      <Node icon={External} label='External System' />\n      <Node icon={Cloud} label='Cloud System' />\n      <Edge color='#005481' dashed label='Built-in Interface' />\n      <Edge color='#9e6614' label='Custom Interface' />\n    </LegendContainer>\n  )\n}\n","const _handlers = {}\n\nexport const Subject = {\n  subscribe (event, handler) {\n    if (!_handlers[event]) _handlers[event] = []\n    _handlers[event].push(handler)\n  },\n  unsubscribe (event, handler) {\n    if (!_handlers[event]) return\n    _handlers[event] = _handlers[event].filter(func => func !== handler)\n  },\n  next (event, ...args) {\n    if (!_handlers[event]) return\n    _handlers[event].forEach(handler => {\n      if (typeof handler === 'function') {\n        handler(...args)\n      }\n    })\n  }\n}\n\nObject.freeze(Subject)\n","const _NodeManager = () => {\n  const _get = (key, defaultValue) => JSON.parse(localStorage.getItem(key)) || defaultValue\n  const _set = (key, value) => localStorage.setItem(key, JSON.stringify(value))\n  const getNodesObject = () => {\n    return _get('_nodes', {})\n  }\n\n  const getNodes = () => {\n    const nodes = _get('_nodes', {})\n    const nodeKeys = Object.keys(nodes)\n\n    return nodeKeys.reduce((acc, cur) => {\n      acc.push(nodes[cur])\n      return acc\n    }, [])\n  }\n\n  const getEdges = () => {\n    return _get('_edges', {})\n  }\n\n  const saveUploadedData = ({ edges, nodes }) => {\n    _set('_edges', edges)\n    _set('_nodes', nodes)\n  }\n\n  return {\n    getEdges,\n    getNodesObject,\n    saveUploadedData,\n    getNodes\n  }\n}\n\nexport const NodeManager = _NodeManager()\n","import get from 'lodash.get'\nimport differenceby from 'lodash.differenceby'\nimport uuid from 'uuid/v4'\n\nconst shouldFixEdges = true\n\nconst _Graph = () => {\n  const _get = (key, defaultValue) => JSON.parse(localStorage.getItem(key)) || defaultValue\n  const _set = (key, value) => localStorage.setItem(key, JSON.stringify(value))\n\n  const fixEdges = oldEdges => {\n    const edges = { ...oldEdges }\n    const edgeKeys = Object.keys(edges)\n    let didFix = false\n\n    edgeKeys.forEach(key => {\n      const nodeEdges = edges[key]\n      const currentEdgeID = key\n      nodeEdges.forEach(edge => {\n        if (edge.node === key) return\n        const otherEdges = edges[edge.node]\n        const otherEdgeIndex = otherEdges && otherEdges.findIndex(edge => edge.node === currentEdgeID)\n        if (otherEdgeIndex >= 0) {\n          otherEdges.splice(otherEdgeIndex, 1)\n          if (!didFix) didFix = true\n        }\n      })\n\n      if (edges.length <= 0) delete nodeEdges[key]\n    })\n\n    return { edges, didFix }\n  }\n\n  const updateNodePosition = async ({ node, x, y }) => {\n    const nodes = await _get('_nodes', {})\n    if (nodes[node]) {\n      nodes[node].position = {\n        x,\n        y\n      }\n    }\n    return _set('_nodes', nodes)\n  }\n\n  const getEdges = async () => {\n    if (shouldFixEdges) {\n      const _edges = await _get('_edges', {})\n      const { didFix, edges } = fixEdges(_edges)\n      if (didFix) {\n        await _set('_edges', edges)\n      }\n    }\n    return _get('_edges', {})\n  }\n\n  const getNodesArray = async () => {\n    const nodes = await _get('_nodes', {})\n    return Object.values(nodes)\n  }\n\n  const getNodes = async () => {\n    return _get('_nodes', {})\n  }\n\n  const setEdges = async (edges) => {\n    return _set('_edges', edges)\n  }\n\n  const setNodes = async (nodes) => {\n    return _set('_nodes', nodes)\n  }\n\n  const addNode = async (node) => {\n    if (!node.id) throw new Error('Nodes must have IDs to be added')\n    const _nodes = await getNodes()\n\n    _nodes[node.id] = node\n\n    await makeEdges(node)\n    await setNodes(_nodes)\n  }\n\n  const addEdge = async (node1, node2, data) => {\n    if (!node1.id || !node2.id) throw new Error('Nodes must have IDs to add edges')\n\n    const _edges = await getEdges()\n\n    if (!Array.isArray(_edges[node1.id])) _edges[node1.id] = []\n\n    await addDirectedEdge(node1, node2, data)\n  }\n\n  const addDirectedEdge = async (node1, node2, data) => {\n    if (!node1.id || !node2.id) throw new Error('Nodes must have IDs to add directed edges')\n\n    const _edges = await getEdges()\n\n    if (!Array.isArray(_edges[node1.id])) _edges[node1.id] = []\n\n    const node2TargetID = _edges[node1.id].findIndex(({ node }) => node === node2.id)\n\n    if (node2TargetID >= 0) {\n      // Replace edge because it exists already\n      _edges[node1.id][node2TargetID] = { node: node2.id, data }\n    } else {\n      // Add edge, it does not exist\n      _edges[node1.id].push({ node: node2.id, data })\n    }\n\n    await setEdges({ ..._edges })\n  }\n\n  const removeDirectedEdge = async (node1, node2) => {\n    if (!node1.id || !node2.id) throw new Error('Nodes must have IDs to remove directed eges')\n\n    const _edges = await getEdges()\n\n    _edges[node1.id] = _edges[node1.id] && _edges[node1.id].filter(({ node }) => node !== node2.id)\n\n    await setEdges(_edges)\n  }\n\n  const removeEdge = async (node1, node2) => {\n    if (!node1.id || !node2.id) throw new Error('Nodes must have IDs to remove edges')\n\n    const _edges = await getEdges()\n\n    _edges[node1.id] = _edges[node1.id] && _edges[node1.id].filter(({ node }) => node !== node2.id)\n\n    await setEdges(_edges)\n  }\n\n  const makeNode = async ({ id, data, connections }) => {\n    let node = null\n    if (id) {\n      const nodes = await getNodes()\n      node = {\n        id,\n        edges: [],\n        previousEdges: nodes[id].edges.map(item => ({ ...item })),\n        data: {\n          ...nodes[id].data,\n          ...data\n        }\n      }\n    } else {\n      node = {\n        id: uuid(),\n        edges: [],\n        data: {\n          ...(data || {})\n        }\n      }\n    }\n\n    const connectionKeys = Object.keys(connections || {})\n    const previousEdges = get(node, 'previousEdges', [])\n\n    if (connectionKeys.length <= 0 && previousEdges.length > 0) {\n      const edges = await getEdges()\n      delete edges[node.id]\n      const removeEdges = []\n      Object.keys(edges).forEach(key => {\n        edges[key].forEach((edge, index) => {\n          if (edge.node === node.id) {\n            removeEdges.push({ key, index })\n          }\n        })\n      })\n      removeEdges.forEach(remove => {\n        edges[remove.key].splice(remove.index, 1)\n      })\n      await setEdges({ ...edges })\n      return node\n    }\n\n    connectionKeys.forEach(key => {\n      const info = get(connections, `${[key]}.connectedTo`, null)\n      if (!info) throw new Error('You cannot make a connection without a target')\n      const type = get(connections, `${[key]}.connectionType`, null)\n      if (!type) throw new Error('You cannot make a connection without a type')\n\n      const read = get(connections, `${[key]}.read`, null)\n      const write = get(connections, `${[key]}.write`, null)\n\n      if (!read && !write) throw new Error('You must specify a read or a write option')\n\n      const data = get(connections, `[${key}].data`, {})\n\n      const existingEdgeIndex = node.edges.findIndex(edge => edge.id === key)\n\n      if (existingEdgeIndex >= 0) {\n        node.edges[existingEdgeIndex] = {\n          id: info.key,\n          data: {\n            ...data,\n            read,\n            write,\n            type: {\n              id: type.key,\n              label: type.text\n            }\n          }\n        }\n      } else {\n        node.edges.push({\n          id: info.key,\n          data: {\n            ...data,\n            read,\n            write,\n            type: {\n              id: type.key,\n              label: type.text\n            }\n          }\n        })\n      }\n    })\n    return node\n  }\n\n  const makeEdges = async (node) => {\n    const edges = get(node, 'edges', [])\n    const previousEdges = get(node, 'previousEdges', [])\n\n    if (edges.length <= 0) return\n\n    for (let i = 0; i < edges.length; i++) {\n      const edge = edges[i]\n\n      const read = get(edge, 'data.read')\n      const write = get(edge, 'data.write')\n\n      const node1 = {\n        id: get(node, 'id')\n      }\n      const node2 = {\n        id: get(edge, 'id')\n      }\n\n      const prevEdge = previousEdges.find(({ id }) => id === edge.id)\n\n      const prev = {\n        read: get(prevEdge, `data.read`, read),\n        write: get(prevEdge, `data.write`, write)\n      }\n\n      if (prev.read && !read) {\n        await removeDirectedEdge(node2, node1)\n      }\n\n      if (prev.write && !write) {\n        await removeDirectedEdge(node1, node2)\n      }\n\n      if (read && write) {\n        await addEdge(node1, node2, get(edge, 'data'))\n      } else if (read) {\n        await addDirectedEdge(node2, node1, get(edge, 'data'))\n      } else if (write) {\n        await addDirectedEdge(node1, node2, get(edge, 'data'))\n      }\n    }\n\n    const cleanup = differenceby(previousEdges, node.edges, 'id')\n\n    if (cleanup.length >= 0) {\n      for (let i = 0; i < cleanup.length; i++) {\n        const edge = cleanup[i]\n\n        const read = get(edge, 'data.read')\n        const write = get(edge, 'data.write')\n\n        const node1 = {\n          id: get(node, 'id')\n        }\n        const node2 = {\n          id: get(edge, 'id')\n        }\n\n        if (read && write) {\n          await removeEdge(node1, node2)\n        } else if (read) {\n          await removeDirectedEdge(node2, node1)\n        } else if (write) {\n          await removeDirectedEdge(node1, node2)\n        }\n      }\n    }\n  }\n\n  return {\n    getNodes,\n    getEdges,\n    addNode,\n    removeEdge,\n    removeDirectedEdge,\n    updateNodePosition,\n    getNodesArray,\n    makeNode\n  }\n}\n\nexport const Graph = _Graph()\n","import { Network as VisNetwork, DataSet } from 'vis-network'\nimport { Graph } from './Graph'\n\nconst _Network = () => {\n  let _nodes = []\n  let _edges = []\n  let _options = {}\n  let _container = null\n  let _network = null\n\n  const inContainer = element => {\n    _container = element\n    return builder\n  }\n\n  const withNodes = nodes => {\n    _nodes = nodes\n    return builder\n  }\n\n  const withEdges = edges => {\n    _edges = edges\n    return builder\n  }\n\n  const withOptions = options => {\n    _options = options\n    return builder\n  }\n\n  const makeData = () => {\n    return {\n      nodes: new DataSet(_nodes),\n      edges: new DataSet(_edges)\n    }\n  }\n\n  const build = () => {\n    if (!_network) {\n      _network = new VisNetwork(_container, makeData(), _options)\n      _network.once('afterDrawing', function () {\n        _network.fit({\n          animation: {\n            duration: 600,\n            easingFunction: 'easeInOutQuad'\n          }\n        })\n      })\n    }\n    return {\n      network: _network,\n      setData: ({ nodes, edges }) => {\n        _nodes = nodes\n        _edges = edges\n        _network.setData(makeData())\n      },\n      updateNodePosition: Graph.updateNodePosition,\n      getNodes: () => _nodes,\n      getEdges: () => _edges\n    }\n  }\n\n  const builder = {\n    withEdges,\n    withNodes,\n    withOptions,\n    inContainer,\n    build\n  }\n\n  return builder\n}\n\nexport const Network = _Network()\n","import { useEffect } from 'react'\nimport { Subject } from '../util/Subject'\n\nexport const useEvent = (event, handler) => {\n  useEffect(() => {\n    if (typeof handler !== 'function') return\n    Subject.subscribe(event, handler)\n    return () => Subject.unsubscribe(event, handler)\n  }, [event, handler])\n\n  return value => Subject.next(event, value)\n}\n","import React, { useReducer, useEffect, useCallback, useState, useRef } from 'react'\nimport { Legend } from '../Legend'\nimport { Network, Graph } from '../../util'\nimport { useEvent } from '../../hooks'\nimport get from 'lodash.get'\n\nconst systemsReducer = (state, action) => {\n  switch (action.type) {\n    case 'update':\n      const nodes = action.nodes\n      const edges = action.edges\n      return buildGraphData(nodes, edges)\n    default:\n      return state\n  }\n}\n\nconst getLinkColor = (type) => {\n  switch (type) {\n    case 'custom':\n      return '#005481'\n    case 'builtin':\n      return '#9e6614'\n    default:\n      return '#A0A0A0'\n  }\n}\n\nconst getShape = (type) => {\n  switch (type) {\n    case 'cloud':\n      // Cloud shape\n      return { shape: 'icon', shapeProperties: { size: 25 }, icon: { face: 'Ionicons', code: '\\uf2c9', color: '#FFF' } }\n    case 'external':\n      return { shape: 'icon', shapeProperties: { size: 25 }, icon: { face: 'Ionicons', code: '\\uf381', color: '#FFF' } }\n    case 'oncampus':\n    default:\n      // Square Shape\n      return { shape: 'icon', shapeProperties: { size: 25 }, icon: { face: 'Ionicons', code: '\\uf384', color: '#FFF' } }\n  }\n}\n\nconst getArrowDirection = (edge) => {\n  const read = get(edge, 'data.read')\n  const write = get(edge, 'data.write')\n\n  if (read && write) return 'from, to'\n  return 'to'\n}\n\nconst buildGraphData = (nodes, edges) => {\n  const graphData = {\n    nodes: [],\n    edges: []\n  }\n\n  const nodeKeys = Object.keys(nodes || {})\n  nodeKeys.forEach(key => {\n    const node = nodes[key]\n\n    graphData.nodes.push({\n      id: node.id,\n      type: node.data.type,\n      ...getShape(node.data.type),\n      label: node.data.name,\n      edges: node.edges,\n      font: {\n        color: '#363534',\n        strokeWidth: 2,\n        strokeColor: '#FFFFFF'\n      },\n      shadow: {\n        enabled: true,\n        size: 4,\n        x: 1,\n        y: 1\n      },\n      data: {\n        ...node.data\n      },\n      color: '#FFFFFF',\n      x: get(node, 'position.x'),\n      y: get(node, 'position.y')\n    })\n  })\n\n  const edgeKeys = Object.keys(edges || {})\n  edgeKeys.forEach(nodeId => {\n    const edgeList = edges[nodeId]\n\n    edgeList.forEach(edge => {\n      graphData.edges.push({\n        from: nodeId,\n        to: edge.node,\n        smooth: {\n          enabled: true,\n          type: 'cubizBezier',\n          roundness: 0.15\n        },\n        color: {\n          color: getLinkColor(get(edge, 'data.type.id')),\n          hover: '#501214',\n          highlight: '#501214'\n        },\n        dashes: get(edge, 'data.type.id') === 'custom',\n        type: get(edge, 'data.type', {}),\n        arrows: getArrowDirection(edge, nodeId)\n      })\n    })\n  })\n\n  return graphData\n}\n\nexport const SystemsGraph = () => {\n  const [systems, systemsDispatch] = useReducer(systemsReducer, { nodes: [], edges: [] })\n  const [activeNode, setActiveNode] = useState()\n\n  const graphContainer = useRef()\n  const graph = useRef()\n\n  const updateGraph = async () => {\n    const nodes = await Graph.getNodes()\n    const edges = await Graph.getEdges()\n    systemsDispatch({ type: 'update', nodes, edges })\n  }\n\n  const updateSearchResults = (results) => {\n    if (graph.current.network) {\n      if (results.length <= 0) {\n        const selected = graph.current.network.getSelectedNodes()\n        graph.current.network.unselectAll()\n\n        // Were there nodes selected? Zoom back out.\n        if (selected.length > 0) {\n          graph.current.network.fit({\n            animation: {\n              duration: 300,\n              easingFunction: 'easeInOutQuad'\n            }\n          })\n        }\n        return\n      }\n      graph.current.network.selectNodes(results)\n      graph.current.network.fit({\n        nodes: results,\n        animation: {\n          duration: 300,\n          easingFunction: 'easeInOutQuad'\n        }\n      })\n    }\n  }\n\n  useEffect(() => {\n    updateGraph()\n  }, [])\n\n  const resetActiveNode = () => setActiveNode(null)\n  const displayNodeDetails = useEvent('display-node-details')\n  useEvent('node-search-result', updateSearchResults)\n\n  const handleNodeSelect = useCallback(params => {\n    const node = get(params, `nodes[0]`, null)\n    if (params.nodes.length > 1) return\n\n    if (node) {\n      if (!graph.current.network.isCluster(node)) {\n        const matchingNode = systems.nodes.find(({ id }) => id === node)\n        if (matchingNode) {\n          setActiveNode(matchingNode)\n        }\n      }\n    }\n  }, [systems.nodes])\n\n  useEffect(() => {\n    if (activeNode) displayNodeDetails(activeNode)\n  }, [activeNode, displayNodeDetails])\n\n  useEvent('save-node-entry', updateGraph)\n  useEvent('deselect-active-node', resetActiveNode)\n\n  useEffect(() => {\n    const options = {\n      autoResize: false,\n      interaction: {\n        hover: true,\n        hoverConnectedEdges: true\n      },\n      physics: {\n        enabled: false\n      }\n    }\n\n    if (!graph.current) {\n      const start = new Date()\n      const systemGraph = Network\n        .inContainer(graphContainer.current)\n        .withEdges(systems.edges)\n        .withNodes(systems.nodes)\n        .withOptions(options)\n        .build()\n\n      console.log(`Network Build Time: ${new Date() - start}ms`)\n      graph.current = systemGraph\n\n      graph.current.network.on('selectNode', handleNodeSelect)\n      graph.current.network.on('dragEnd', event => {\n        if (event.nodes.length > 0) {\n          const node = get(event, 'nodes[0]')\n          const { x, y } = get(event, 'pointer.canvas', {})\n          graph.current.updateNodePosition({\n            node,\n            x,\n            y\n          })\n        }\n      })\n\n      document.addEventListener('contextmenu', e => e.preventDefault(), false)\n    } else {\n      graph.current.network.off('selectNode', handleNodeSelect)\n      graph.current.network.on('selectNode', handleNodeSelect)\n\n      graph.current.setData(systems)\n    }\n  }, [systems, handleNodeSelect])\n\n  return (\n    <>\n      <div style={{ overflow: 'hidden', height: 'calc(100% - 44px)' }} ref={graphContainer} id='graph' />\n      <Legend />\n    </>\n  )\n}\n","import dayjs from 'dayjs'\nimport get from 'lodash.get'\nimport { NodeManager } from './NodeManager'\nimport { Subject } from './Subject'\n\nexport const downloadFile = (filename, data) => {\n  const element = document.createElement('a')\n  element.setAttribute('href', `data:text/plain;charset=utf-8,${encodeURIComponent(data)}`)\n  element.setAttribute('download', `${filename} - ${dayjs().format('YYYY-MM-DD/THHmmss')}.json`)\n\n  element.style.display = 'none'\n  document.body.appendChild(element)\n  element.click()\n  document.body.removeChild(element)\n}\n\nconst handleFile = (event) => {\n  const reader = new FileReader()\n  reader.readAsBinaryString(event.target.files[0])\n\n  reader.onloadend = async () => {\n    const data = JSON.parse(reader.result)\n    const edges = get(data, 'edges', {})\n    const nodes = get(data, 'nodes', {})\n\n    NodeManager.saveUploadedData({ edges, nodes })\n    Subject.next('save-node-entry')\n  }\n}\n\nexport const uploadFile = () => {\n  const element = document.createElement('input')\n  element.setAttribute('type', 'file')\n  element.setAttribute('accept', '.json')\n\n  element.style.display = 'none'\n  element.addEventListener('change', handleFile)\n  element.click()\n}\n","import React from 'react'\nimport { useEvent } from '../../hooks'\nimport { CommandBar as OfficeCommandBar } from 'office-ui-fabric-react/lib/CommandBar'\nimport { SearchBox } from 'office-ui-fabric-react/lib/SearchBox'\nimport { downloadFile, uploadFile } from '../../util/FileManager'\nimport { Graph, Subject } from '../../util'\nimport debounce from 'lodash.debounce'\nimport get from 'lodash.get'\n\nconst handleSearch = async (event, value) => {\n  const nodes = await Graph.getNodesArray()\n\n  let results = nodes.filter(node => {\n    const name = get(node, 'data.name', '').toLowerCase()\n    return name.includes(value.toLowerCase())\n  }).map(({ id }) => id)\n\n  if (!value) {\n    results = []\n  }\n\n  Subject.next('node-search-result', results)\n}\n\nconst SearchNodes = () => {\n  return (\n    <SearchBox\n      placeholder='Search'\n      className='searchBox'\n      styles={{\n        root: {\n          width: '250px',\n          alignSelf: 'center'\n        }\n      }}\n      onChange={debounce(handleSearch, 500)}\n    />\n  )\n}\n\nexport const CommandBar = props => {\n  const toggleLeftPanel = useEvent('toggle-left-panel')\n\n  const farItems = [\n    {\n      key: 'search',\n      onRender: SearchNodes\n    }\n  ]\n\n  const nearItems = [\n    {\n      key: 'addNode',\n      name: 'Add System',\n      iconProps: {\n        iconName: 'Add'\n      },\n      onClick: toggleLeftPanel\n    },\n    {\n      key: 'upload',\n      name: 'Upload',\n      iconProps: {\n        iconName: 'Upload'\n      },\n      onClick: () => {\n        uploadFile()\n      }\n    },\n    {\n      key: 'download',\n      name: 'Download',\n      iconProps: {\n        iconName: 'Download'\n      },\n      onClick: async () => {\n        const edges = await Graph.getEdges()\n        const nodes = await Graph.getNodesObject()\n\n        const filename = 'TR_Systems'\n        downloadFile(filename, JSON.stringify({ edges, nodes }, null, 2))\n      }\n    }\n  ]\n\n  return (\n    <div>\n      <OfficeCommandBar\n        items={nearItems}\n        farItems={farItems}\n      />\n    </div>\n  )\n}\n","import React from 'react'\nimport { Stack } from 'office-ui-fabric-react/lib/Stack'\nimport { Checkbox } from 'office-ui-fabric-react/lib/Checkbox'\n\nconst canChange = (nextPath, nextValue) => (currentRead, currentWrite) => {\n  if (nextPath === 'read') {\n    return nextValue || currentWrite || false\n  }\n\n  if (nextPath === 'write') {\n    return nextValue || currentRead || false\n  }\n  return false\n}\n\nexport const ConnectionReadWrite = props => {\n  const { read, write, onChange } = props\n\n  return (\n    <Stack style={{ marginRight: 8, marginTop: 8 }} verticalAlign='space-between' tokens={{ childrenGap: 4 }}>\n      <Checkbox checked={read} onChange={(event, value) => {\n        if (canChange('read', value)(read, write)) {\n          onChange('read', value)\n        }\n      }} label='Read' />\n      <Checkbox checked={write} onChange={(event, value) => {\n        if (canChange('write', value)(read, write)) {\n          onChange('write', value)\n        }\n      }} label='Write' />\n    </Stack>\n  )\n}\n","import React, { useEffect } from 'react'\nimport styled from 'styled-components'\nimport { Dropdown } from 'office-ui-fabric-react/lib/Dropdown'\nimport { ConnectionReadWrite } from './ConnectionReadWrite'\nimport get from 'lodash.get'\nimport { IconButton } from 'office-ui-fabric-react'\n\nconst ConnectionContainer = styled.div`\n  display: flex;\n  align-items: flex-start;\n  flex-direction: column;\n  justify-content: flex-start;\n  padding: 8px;\n  margin-top: 12px;\n  border: 1px solid rgb(138, 136, 134);\n  box-sizing: border-box;\n  border-radius: 1px;\n\n  & > .ms-Dropdown-container {\n    flex: 1;\n    width: 100%;\n    margin-right: 4px;\n  }\n\n  & > .ms-Button--icon {\n    align-self: flex-end;\n  }\n`\n\nexport const Connection = props => {\n  const { handleRemove, id, edit, addNodeForm, nodeFormErrors, setNodeFormErrors, existingSystems, updateNodeForm } = props\n  const selectedTarget = get(addNodeForm, `connections[${id}].connectedTo.key`, null)\n  const selectedType = get(addNodeForm, `connections[${id}].connectionType.key`, null)\n\n  const selectedRead = get(addNodeForm, `connections[${id}].read`, true)\n  const selectedWrite = get(addNodeForm, `connections[${id}].write`, false)\n\n  const targetError = get(nodeFormErrors, `[${id}].target`)\n  const typeError = get(nodeFormErrors, `[${id}].type`)\n\n  useEffect(() => {\n    if (!edit) {\n      updateNodeForm({\n        path: `connections[${id}].read`,\n        value: true\n      })\n    }\n  }, [updateNodeForm, id, edit])\n\n  return (\n    <ConnectionContainer>\n      <IconButton\n        iconProps={{ iconName: 'ChromeClose' }}\n        onClick={() => {\n          const connection = get(addNodeForm, `connections[${id}]`, null)\n          if (connection) {\n            updateNodeForm({\n              path: `connections[${id}]`,\n              type: 'remove'\n            })\n          }\n          handleRemove()\n        }}\n      />\n      <Dropdown\n        label='Connected To'\n        placeholder={`What does this system connect to?`}\n        options={existingSystems}\n        errorMessage={targetError}\n        selectedKey={selectedTarget}\n        onChange={(event, value) => {\n          updateNodeForm({\n            path: `connections[${id}].connectedTo`,\n            value: { key: value.key, text: value.text }\n          })\n          if (`${id}` in nodeFormErrors) {\n            const errors = {\n              ...nodeFormErrors\n            }\n            delete errors[id]\n            setNodeFormErrors(errors)\n          }\n        }}\n      />\n      <Dropdown\n        label='Interface'\n        options={[\n          { key: 'builtin', text: 'Built In' },\n          { key: 'custom', text: 'Custom' }\n        ]}\n        placeholder='How does this system connect?'\n        selectedKey={selectedType}\n        errorMessage={typeError}\n        onChange={(event, value) => {\n          updateNodeForm({\n            path: `connections[${id}].connectionType`,\n            value: { key: value.key, text: value.text, color: value.color }\n          })\n          if (`${id}` in nodeFormErrors) {\n            const errors = {\n              ...nodeFormErrors\n            }\n            delete errors[id]\n            setNodeFormErrors(errors)\n          }\n        }}\n      />\n      <ConnectionReadWrite\n        read={selectedRead}\n        write={selectedWrite}\n        onChange={(path, value) => {\n          updateNodeForm({\n            path: `connections[${id}].${path}`,\n            value\n          })\n        }}\n      />\n    </ConnectionContainer>\n  )\n}\n","import React from 'react'\nimport { Dropdown } from 'office-ui-fabric-react/lib/Dropdown'\n\nconst areEqual = (prevProps, nextProps) => {\n  const keysUnchanged = prevProps.selectedKey === nextProps.selectedKey\n  const errorUnchanged = prevProps.errorMessage === nextProps.errorMessage\n  return keysUnchanged && errorUnchanged\n}\n\nexport const SystemType = React.memo(props => {\n  const { selectedKey, onChange, required, errorMessage } = props\n\n  return (\n    <Dropdown\n      required={required}\n      label='System Type'\n      options={[\n        { key: 'oncampus', text: 'On Campus' },\n        { key: 'cloud', text: 'Cloud' },\n        { key: 'external', text: 'External' }\n      ]}\n      errorMessage={errorMessage}\n      placeholder='Where does this system live?'\n      selectedKey={selectedKey}\n      onChange={onChange}\n    />\n  )\n}, areEqual)\n","import React from 'react'\nimport { TextField } from 'office-ui-fabric-react/lib/TextField'\nimport { ActionButton } from 'office-ui-fabric-react'\nimport { SystemType } from './SystemType'\n\nconst renderConnections = ({ connections, existingSystems, addNodeForm, updateNodeForm, setNodeFormErrors, nodeFormErrors }) => {\n  return connections.map(conn => React.cloneElement(conn, { existingSystems, addNodeForm, updateNodeForm, setNodeFormErrors, nodeFormErrors }))\n}\n\nconst checkURL = url => {\n  if (!url) return\n  try {\n    const checkedURL = new URL(url)\n    if (checkedURL) return null\n  } catch (err) {\n    return err.message\n  }\n}\n\nexport const SystemFormView = props => {\n  const {\n    nodeFormErrors,\n    existingSystems,\n    setNodeFormErrors,\n    addNodeForm,\n    updateNodeForm,\n    connections,\n    addConnection,\n    edit\n  } = props\n  return (\n    <>\n      <TextField\n        label='Name'\n        placeholder='Choose a name'\n        errorMessage={nodeFormErrors.name}\n        required\n        onGetErrorMessage={(value => {\n          const newSystem = String(value).toLowerCase()\n          const nameExists = existingSystems.some(({ text }) => String(text).toLowerCase() === newSystem)\n          if (nameExists && !edit) {\n            setNodeFormErrors({\n              ...nodeFormErrors,\n              name: `The ${value} system already exists`\n            })\n          } else {\n            if (nodeFormErrors.name) {\n              const errors = {\n                ...nodeFormErrors\n              }\n              delete errors.name\n              setNodeFormErrors(errors)\n            }\n          }\n        })}\n        onChange={(event, value) => updateNodeForm({ path: 'name', value })}\n        value={addNodeForm.name || ''}\n      />\n      <SystemType\n        required\n        errorMessage={nodeFormErrors.type}\n        selectedKey={addNodeForm.type || null}\n        onChange={(event, value) => {\n          updateNodeForm({ path: 'type', value: value.key })\n          if ('type' in nodeFormErrors) {\n            const errors = {\n              ...nodeFormErrors\n            }\n            delete errors.type\n            setNodeFormErrors(errors)\n          }\n        }}\n      />\n      <TextField\n        label='Department'\n        placeholder='Was this built for another department?'\n        onChange={(event, value) => updateNodeForm({ path: 'department', value })}\n        value={addNodeForm.department || ''}\n      />\n      <TextField\n        label='URL'\n        placeholder='Is there a url to access this system?'\n        onChange={(event, value) => updateNodeForm({ path: 'url', value })}\n        onGetErrorMessage={value => checkURL(value)}\n        value={addNodeForm.url || ''}\n      />\n      <TextField\n        label='Description'\n        placeholder='Enter some information others may want to know about this system'\n        multiline\n        rows={4}\n        onChange={(event, value) => updateNodeForm({ path: 'description', value })}\n        value={addNodeForm.description || ''}\n      />\n      {renderConnections({ connections, existingSystems, addNodeForm, updateNodeForm, setNodeFormErrors, nodeFormErrors })}\n      <ActionButton\n        onClick={addConnection}\n        iconProps={{ iconName: 'Add' }}\n      >\n        Add Connection\n      </ActionButton>\n    </>\n  )\n}\n","import React, { useState, useReducer } from 'react'\nimport { Panel, PanelType } from 'office-ui-fabric-react/lib/Panel'\nimport { NodeManager, Graph } from '../../util'\nimport { Stack } from 'office-ui-fabric-react/lib/Stack'\nimport { PrimaryButton, DefaultButton } from 'office-ui-fabric-react'\nimport { useEvent } from '../../hooks'\nimport get from 'lodash.get'\nimport uuid from 'uuid/v4'\nimport set from 'lodash.set'\nimport unset from 'lodash.unset'\nimport { Connection } from './Connection'\nimport { Network } from '../../util/Network'\nimport { SystemFormView } from './SystemFormView'\n\nconst makeConnections = (system, nodes) => {\n  const connections = {}\n  system.edges.forEach(edge => {\n    connections[edge.id] = {\n      read: edge.data.read,\n      write: edge.data.write,\n      connectionType: {\n        key: edge.data.type.id,\n        text: edge.data.type.label\n      },\n      connectedTo: {\n        key: edge.id,\n        text: get(nodes.filter(node => node.id === edge.id), '[0].data.name', '')\n      }\n    }\n  })\n  return connections\n}\n\nconst makeFormState = system => {\n  const { network, getNodes } = Network.build()\n  const nodes = network.getConnectedNodes(system.id)\n\n  const connectedNodes = getNodes().filter(({ id }) => nodes.includes(id))\n\n  const formState = {\n    name: get(system, 'data.name'),\n    id: get(system, 'id'),\n    type: get(system, 'data.type'),\n    department: get(system, 'data.department'),\n    url: get(system, 'data.url'),\n    description: get(system, 'data.description'),\n    connections: makeConnections(system, connectedNodes)\n  }\n  return formState\n}\n\nconst addNodeReducer = (state, action) => {\n  if (action.path === '') return {}\n  const addNodeState = { ...state }\n  switch (action.type) {\n    case 'remove':\n      unset(addNodeState, action.path)\n      return addNodeState\n    case 'edit':\n      return { ...action.formState }\n    default:\n      set(addNodeState, action.path, action.value)\n      return addNodeState\n  }\n}\n\nconst connectionReducer = (connections, action) => {\n  switch (action.type) {\n    case 'add':\n      const id = uuid()\n      return [\n        ...connections,\n        <Connection\n          key={id}\n          id={id}\n          handleRemove={() => action.dispatch({ type: 'remove', id })}\n        />\n      ]\n    case 'remove':\n      return connections.filter(({ key }) => key !== action.id)\n    case 'reset':\n      return []\n    case 'edit':\n      const connKeys = Object.keys(action.connections)\n      return connKeys.map(key => {\n        const id = key\n        const dispatch = get(action, 'dispatch', null)\n\n        if (!dispatch || !id) return null\n\n        return (\n          <Connection\n            edit\n            key={id}\n            id={id}\n            handleRemove={() => dispatch({ type: 'remove', id })}\n          />\n        )\n      }).filter(item => item)\n    default:\n      return connections\n  }\n}\n\nconst getSystems = () => {\n  const nodes = NodeManager.getNodes()\n  return nodes.map(node => ({ key: node.id, text: node.data.name })).sort((a, b) => {\n    if (a.text < b.text) return -1\n    if (a.text > b.text) return 1\n    return 0\n  })\n}\n\nconst validate = (addNodeForm, nodeFormErrors) => {\n  let errors = {}\n  if (nodeFormErrors) {\n    errors = {\n      ...nodeFormErrors\n    }\n  }\n\n  if (!addNodeForm.type) {\n    errors.type = 'A system type must be selected'\n  }\n\n  if (!addNodeForm.name) {\n    errors.name = 'A system name is required'\n  }\n\n  if (addNodeForm.connections) {\n    const keys = Object.keys(addNodeForm.connections || {})\n    keys.forEach(key => {\n      const target = get(addNodeForm, `connections[${key}].connectedTo.key`, null)\n      const type = get(addNodeForm, `connections[${key}].connectionType.key`, null)\n\n      if (!type) set(errors, `[${key}].type`, 'The connection must have a type selected')\n      if (!target) set(errors, `[${key}].target`, 'You must select another system to connect to')\n    })\n  }\n\n  return errors\n}\n\nexport const SystemForm = (props) => {\n  const [edit, setEdit] = useState(false)\n  const [isOpen, setIsOpen] = useState(false)\n  const [addNodeForm, updateNodeForm] = useReducer(addNodeReducer, {})\n  const [existingSystems, setExistingSystems] = useState(getSystems())\n  const [nodeFormErrors, setNodeFormErrors] = useState({})\n  const [connections, connDispatch] = useReducer(connectionReducer, [])\n\n  const toggle = () => setIsOpen(!isOpen)\n  const resetForm = () => updateNodeForm({ path: '', value: {} })\n  const resetConnections = () => connDispatch({ type: 'reset' })\n\n  const handleEditSystem = (system) => {\n    const formState = makeFormState(system)\n    connDispatch({\n      type: 'edit',\n      connections: formState.connections || {},\n      dispatch: connDispatch\n    })\n    updateNodeForm({ type: 'edit', formState })\n    setEdit(true)\n    setIsOpen(true)\n  }\n\n  useEvent('edit-system-panel', handleEditSystem)\n\n  const addConnection = () => {\n    connDispatch({\n      type: 'add',\n      dispatch: connDispatch,\n      existingSystems,\n      addNodeForm,\n      updateNodeForm\n    })\n  }\n\n  const submitSystem = async () => {\n    const errors = validate(addNodeForm, nodeFormErrors)\n    if (Object.keys(errors).length > 0) {\n      setNodeFormErrors({\n        ...nodeFormErrors,\n        ...errors\n      })\n      return\n    }\n\n    const connections = get(addNodeForm, 'connections', {})\n    const data = {\n      description: get(addNodeForm, 'description', ''),\n      name: get(addNodeForm, 'name', ''),\n      type: get(addNodeForm, 'type', ''),\n      url: get(addNodeForm, 'url', ''),\n      department: get(addNodeForm, 'department', '')\n    }\n\n    if (edit) {\n      const node = await Graph.makeNode({ id: addNodeForm.id, connections, data })\n      await Graph.addNode(node)\n    } else {\n      const node = await Graph.makeNode({ connections, data })\n      await Graph.addNode(node)\n    }\n\n    broadcastNodeSave()\n    resetConnections()\n    resetForm()\n  }\n\n  useEvent('toggle-left-panel', toggle)\n  const dismiss = () => {\n    resetForm()\n    resetConnections()\n    setIsOpen(false)\n    setEdit(false)\n  }\n\n  const updateExistingSystems = () => {\n    const systems = getSystems()\n    setExistingSystems(systems)\n  }\n\n  const broadcastNodeSave = useEvent('save-node-entry', updateExistingSystems)\n\n  return (\n    <Panel\n      headerText={`${edit ? 'Edit' : 'Add'} System`}\n      isOpen={isOpen}\n      onDismiss={dismiss}\n      isFooterAtBottom\n      onRenderFooterContent={() => (\n        <Stack horizontal horizontalAlign='space-between' tokens={{ childrenGap: 12 }}>\n          <DefaultButton text='Cancel' onClick={dismiss} />\n          <PrimaryButton text='Save System' onClick={submitSystem} />\n        </Stack>\n      )}\n      type={PanelType.medium}\n    >\n      <SystemFormView\n        edit={edit}\n        existingSystems={existingSystems}\n        nodeFormErrors={nodeFormErrors}\n        setNodeFormErrors={setNodeFormErrors}\n        addNodeForm={addNodeForm}\n        updateNodeForm={updateNodeForm}\n        connections={connections}\n        addConnection={addConnection}\n      />\n    </Panel>\n  )\n}\n","import React from 'react'\nimport { Stack } from 'office-ui-fabric-react/lib/Stack'\nimport { Text } from 'office-ui-fabric-react/lib/Text'\n\nconst NodeDetailView = props => {\n  const { description, department, url, connections } = props\n  return (\n    <Stack tokens={{ childrenGap: 8 }}>\n      <Stack tokens={{ childrenGap: 4 }}>\n        <Text style={{ textDecoration: 'underline' }} variant='mediumPlus'>Description</Text>\n        <Text>{description}</Text>\n      </Stack>\n      <Stack tokens={{ childrenGap: 4 }}>\n        <Text style={{ textDecoration: 'underline' }} variant='mediumPlus'>Department</Text>\n        <Text>{department}</Text>\n      </Stack>\n      <Stack tokens={{ childrenGap: 4 }}>\n        <Text style={{ textDecoration: 'underline' }} variant='mediumPlus'>URL</Text>\n        <a href={url}>{url}</a>\n      </Stack>\n      <Stack>\n        <Text style={{ textDecoration: 'underline' }} variant='mediumPlus'>Connections</Text>\n        {connections}\n      </Stack>\n    </Stack>\n  )\n}\n\nexport default NodeDetailView\n","import React, { useState } from 'react'\nimport { Panel, PanelType } from 'office-ui-fabric-react/lib/Panel'\nimport { IconButton } from 'office-ui-fabric-react'\nimport { Stack } from 'office-ui-fabric-react/lib/Stack'\nimport { Text } from 'office-ui-fabric-react/lib/Text'\nimport styled from 'styled-components'\nimport get from 'lodash.get'\nimport { useEvent } from '../../hooks'\nimport { NodeManager } from '../../util'\nimport NodeDetailView from './NodeDetailView'\n\nconst CustomPanel = styled(Panel)`\n  & > .ms-Panel-main {\n    transition: width 300ms ease-in-out;\n  }\n`\nconst parseConnections = (node) => {\n  if (!node) return []\n  const edges = NodeManager.getEdges()\n  const nodes = NodeManager.getNodesObject()\n\n  const edgeKeys = Object.keys(edges || {})\n  return edgeKeys.reduce((acc, cur) => {\n    const nodeEdges = edges[cur]\n    nodeEdges\n      .filter(edge => edge.node === node.id)\n      .forEach(edge => {\n        const to = get(nodes, `[${cur}].data.name`)\n\n        const type = get(edge, 'data.type.label')\n        const read = get(edge, 'data.read')\n        const write = get(edge, 'data.write')\n\n        acc.push(<Connection key={edge.node} to={to} read={read} write={write} type={type} />)\n      })\n    return acc\n  }, [])\n}\n\nconst Connection = ({ to, type, read, write }) => {\n  let readWriteStatus = ''\n  if (read && write) {\n    readWriteStatus = '(Read and Write)'\n  } else if (read) {\n    readWriteStatus = '(Read)'\n  } else if (write) {\n    readWriteStatus = '(Write)'\n  }\n  return (\n    <Text>{to} - {type} {readWriteStatus}</Text>\n  )\n}\n\nexport const NodeDetail = props => {\n  const [isOpen, setIsOpen] = useState(false)\n  const [node, setNode] = useState(null)\n  const displayNode = (node) => {\n    setNode(node)\n    setIsOpen(true)\n  }\n  const closePanel = () => setIsOpen(false)\n\n  useEvent('display-node-details', displayNode)\n  const editSystem = useEvent('edit-system-panel')\n  const deselectActiveNode = useEvent('deselect-active-node')\n  const name = get(node, 'data.name', 'Very Unnamed System')\n  const description = get(node, 'data.description', 'No description has been entered.')\n  const department = get(node, 'data.department', 'No department has been entered.')\n  const url = get(node, 'data.url', `${name} has no url`)\n\n  const connections = parseConnections(node)\n  const handleEdit = () => {\n    editSystem(node)\n    setIsOpen(false)\n    deselectActiveNode()\n  }\n\n  return (\n    <CustomPanel\n      isOpen={isOpen}\n      onDismiss={() => {\n        deselectActiveNode()\n        closePanel()\n      }}\n      onRenderHeader={(props) => {\n        return (\n          <Stack horizontal tokens={{ childrenGap: 12 }}>\n            <Text variant='xLarge' style={{ marginLeft: 16, marginBottom: 12 }}>{props.headerText}</Text>\n            <IconButton\n              iconProps={{\n                iconName: 'Edit'\n              }}\n              onClick={handleEdit}\n            />\n          </Stack>\n        )\n      }}\n      isLightDismiss\n      type={PanelType.customNear}\n      customWidth={400}\n      headerText={name}\n    >\n      <NodeDetailView\n        connections={connections}\n        department={department}\n        description={description}\n        url={url}\n      />\n    </CustomPanel>\n  )\n}\n","import React from 'react'\nimport styled, { keyframes, css } from 'styled-components'\n\nconst cubeMove = keyframes`\n    25% { \n      transform: translateX(42px) rotate(-90deg) scale(0.5);\n      -webkit-transform: translateX(42px) rotate(-90deg) scale(0.5);\n    } 50% { \n      transform: translateX(42px) translateY(42px) rotate(-179deg);\n      -webkit-transform: translateX(42px) translateY(42px) rotate(-179deg);\n    } 50.1% { \n      transform: translateX(42px) translateY(42px) rotate(-180deg);\n      -webkit-transform: translateX(42px) translateY(42px) rotate(-180deg);\n    } 75% { \n      transform: translateX(0px) translateY(42px) rotate(-270deg) scale(0.5);\n      -webkit-transform: translateX(0px) translateY(42px) rotate(-270deg) scale(0.5);\n    } 100% { \n      transform: rotate(-360deg);\n      -webkit-transform: rotate(-360deg);\n    }\n`\n\nconst Spinner = styled.div`\n  margin: 100px auto;\n  width: 40px;\n  height: 40px;\n  align-self: center;\n  justify-self: center;\n  position: relative;\n`\n\nconst cubeCSS = css`\n  background-color: #501214;\n  width: 15px;\n  height: 15px;\n  position: absolute;\n  top: 0;\n  left: 0;\n  \n  -webkit-animation: ${cubeMove} 1.8s infinite ease-in-out;\n  animation: ${cubeMove} 1.8s infinite ease-in-out;\n`\n\nconst CubeOne = styled.div`\n  ${cubeCSS}\n`\nconst CubeTwo = styled.div`\n  ${cubeCSS}\n  animation-delay: -0.9s;\n`\n\nexport const Loading = props => {\n  return (\n    <Spinner>\n      <CubeOne />\n      <CubeTwo />\n    </Spinner>\n  )\n}\n","import React from 'react'\nimport styled from 'styled-components'\nimport { SystemsGraph, NodeDetail, SystemForm, CommandBar } from './components'\n\nconst Page = styled.div`\n  background-color: #e8e3db;\n  flex: 1;\n  flex-direction: column;\n  display: flex;\n`\n\nfunction App () {\n  return (\n    <Page>\n      <CommandBar />\n      <SystemsGraph />\n      <SystemForm />\n      <NodeDetail />\n    </Page>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport { render } from 'react-dom'\nimport { initializeIcons } from 'office-ui-fabric-react/lib/Icons'\nimport App from './App'\nimport './index.css'\n\ninitializeIcons()\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  render(<App />, document.getElementById('root'))\n})\n"],"sourceRoot":""}